(function(a){a.fn.paginator=function(j){var e={pagesTotal:1,pagesSpan:10,pageCurrent:0,baseUrl:"?page=",returnOrder:false,lang:{next:"Next",last:"Last",prior:"Prior",first:"First",arrowRight:String.fromCharCode(8594),arrowLeft:String.fromCharCode(8592)}};a.extend(e,j);e.pagesSpan=e.pagesSpan<e.pagesTotal?e.pagesSpan:e.pagesTotal;e.pageCurrent=e.pagesTotal<e.pageCurrent?e.pagesTotal:e.pageCurrent;if(!a.isFunction(e.baseUrl)&&!e.baseUrl.match(/%page%/i)){e.baseUrl+="%page%"}var i={holder:null,table:null,trPages:null,trScrollBar:null,tdsPages:null,scrollBar:null,scrollThumb:null,pageCurrentMark:null};function t(s){var u=0;if(!s){s=window.event}if(s.wheelDelta){u=s.wheelDelta/120}else{if(s.detail){u=-s.detail/3}}if(u&&typeof handle=="function"){handle(u);if(s.preventDefault){s.preventDefault()}s.returnValue=false}}function r(s){i.holder=s;a(i.holder).html(n());i.table=a(i.holder).find("table:last");i.trPages=a(i.table).find("tr:first");i.tdsPages=a(i.trPages).find("td");i.scrollBar=a(i.holder).find("div.scroll_bar");i.scrollThumb=a(i.holder).find("div.scroll_thumb");i.pageCurrentMark=a(i.holder).find("div.current_page_mark");if(e.pagesTotal==e.pagesSpan){a(i.holder).addClass("fulsize")}}function n(){var A=(100/(e.pagesSpan+2))+"%";var E=a.isFunction(e.baseUrl);var z=(parseInt(e.pageCurrent)<parseInt(e.pagesTotal)-1)?parseInt(e.pageCurrent)+1:(e.pagesTotal*1-1);var y='<a href="';y+=E?"javascript:void(0)":e.baseUrl.replace(/%page%/i,z);y+='" rel="'+z+'">%next%</a>';var F='<a href="';F+=E?"javascript:void(0)":e.baseUrl.replace(/%page%/i,(e.pagesTotal*1-1));F+='" rel="'+(e.pagesTotal*1-1)+'">%last%</a>';var s=(parseInt(e.pageCurrent)>0)?parseInt(e.pageCurrent)-1:0;var C='<a href="';C+=E?"javascript:void(0)":e.baseUrl.replace(/%page%/i,s);C+='" rel="'+s+'">%prior%</a>';var x='<a href="';x+=E?"javascript:void(0)":e.baseUrl.replace(/%page%/i,0);x+='" rel="'+0+'">%first%</a>';if(e.returnOrder){var B=e.lang.arrowLeft+" "+e.lang.next;var G=e.lang.last;var u=e.lang.prior+" "+e.lang.arrowRight;var D=e.lang.first;if(e.pageCurrent<e.pagesTotal-1){B=y.replace(/%next%/,B);G=F.replace(/%last%/,G)}if(e.pageCurrent>0){u=C.replace(/%prior%/,u);D=x.replace(/%first%/,D)}}else{var D=e.lang.last;var u=e.lang.next+" "+e.lang.arrowRight;var B=e.lang.arrowLeft+" "+e.lang.prior;var G=e.lang.first;if(e.pageCurrent<e.pagesTotal-1){u=y.replace(/%next%/,u);D=F.replace(/%last%/,D)}if(e.pageCurrent>0){B=C.replace(/%prior%/,B);G=x.replace(/%first%/,G)}}var w='<table width="100%"><tr><td class="left top">'+B+'</td><td class="spaser"></td><td rowspan="2" align="center"><table><tr>';for(var v=1;v<=e.pagesSpan;v++){w+='<td width="'+A+'"></td>'}w+='</tr><tr><td colspan="'+e.pagesSpan+'"><div class="scroll_bar"><div class="scroll_trough"></div><div class="scroll_thumb"><div class="scroll_knob"></div></div><div class="current_page_mark"></div></div></td></tr></table></td><td class="spaser"></td><td class="right top">'+u+'</td></tr><tr><td class="left bottom">'+G+'</td><td class="spaser"></td><td class="spaser"></td><td class="right bottom">'+D+"</td></tr></table>";return w}function l(){i.scrollThumb.widthMin="8";i.scrollThumb.widthPercent=e.pagesSpan/e.pagesTotal*100;i.scrollThumb.xPosPageCurrent=(e.pageCurrent+1-Math.round(e.pagesSpan/2))/e.pagesTotal*a(i.table).width();if(e.returnOrder){i.scrollThumb.xPosPageCurrent=a(i.table).width()-(i.scrollThumb.xPosPageCurrent+Math.round(e.pagesSpan/2)/e.pagesTotal*a(i.table).width())}i.scrollThumb.xPos=i.scrollThumb.xPosPageCurrent;i.scrollThumb.xPosMin=0;i.scrollThumb.xPosMax;i.scrollThumb.widthActual;k()}function k(){a(i.scrollThumb).css({width:i.scrollThumb.widthPercent+"%"});i.scrollThumb.widthActual=a(i.scrollThumb).width();if(i.scrollThumb.widthActual<i.scrollThumb.widthMin){a(i.scrollThumb).css("width",i.scrollThumb.widthMin+"px")}i.scrollThumb.xPosMax=a(i.table).width-i.scrollThumb.widthActual}function b(){a(i.scrollThumb).css({left:i.scrollThumb.xPos+"px"})}function d(){i.pageCurrentMark.widthMin="3";i.pageCurrentMark.widthPercent=100/e.pagesTotal;i.pageCurrentMark.widthActual;q();h()}function q(){a(i.pageCurrentMark).css({width:i.pageCurrentMark.widthPercent+"%"});i.pageCurrentMark.widthActual=a(i.pageCurrentMark).width();if(i.pageCurrentMark.widthActual<i.pageCurrentMark.widthMin){a(i.pageCurrentMark).css("width",i.pageCurrentMark.widthMin+"px")}}function h(){var s=0;if(i.pageCurrentMark.widthActual<a(i.pageCurrentMark).width()){s=(e.pageCurrent)/e.pagesTotal*a(i.table).width()-a(i.pageCurrentMark).width()/2}else{s=(e.pageCurrent)/e.pagesTotal*a(i.table).width()}if(s<0){s=0}if(s>(a(i.scrollBar).width()-a(i.pageCurrentMark).width())){s=a(i.scrollBar).width()-a(i.pageCurrentMark).width()}if(e.returnOrder){s=a(i.table).width()-s-a(i.pageCurrentMark).width()}a(i.pageCurrentMark).css({left:s+"px"})}function f(){b();e.returnOrder?o():m();a(i.scrollThumb).bind("mousedown",function(u){var s=u.pageX-i.scrollThumb.xPos;a(document).bind("mousemove",function(v){i.scrollThumb.xPos=v.pageX-s;b();e.returnOrder?o():m()});a(document).bind("mouseup",function(){a(document).unbind("mousemove");g()});c()});if(a.isFunction(e.baseUrl)){a(i.holder).find('a[rel!=""]').bind("click",function(s){var u=parseInt(a(this).attr("rel"));e.baseUrl(u)})}a(window).resize(function(){q();h();k()})}function m(){var s=i.scrollThumb.xPos/a(i.table).width();var y=Math.round(s*e.pagesTotal);var x="";if(y<0){y=0;i.scrollThumb.xPos=0;b()}else{if(y>=e.pagesTotal-e.pagesSpan){y=e.pagesTotal-e.pagesSpan;i.scrollThumb.xPos=a(i.table).width()-a(i.scrollThumb).width();b()}}var w=a.isFunction(e.baseUrl);for(var u=1;u<=i.tdsPages.length;u++){var v=y+u;if((v*1-1)==e.pageCurrent){x="<span> <strong>"+v+"</strong> </span>"}else{x='<span> <a href="';x+=w?"javascript:void(0)":e.baseUrl.replace(/%page%/i,(v*1-1));x+='">'+v+"</a> </span>"}a(i.tdsPages[u-1]).html(x);if(w){a(i.tdsPages[u-1]).find("a").bind("click",function(){e.baseUrl((a(this).text())*1-1)})}}}function o(){var s=i.scrollThumb.xPos/a(i.table).width();var y=e.pagesTotal-Math.round(s*e.pagesTotal);var x="";if(y<e.pagesSpan){y=e.pagesSpan;i.scrollThumb.xPos=a(i.table).width()-a(i.scrollThumb).width();b()}else{if(y>=e.pagesTotal){y=e.pagesTotal;i.scrollThumb.xPos=0;b()}}var w=a.isFunction(e.baseUrl);for(var u=1;u<=i.tdsPages.length;u++){var v=y-u;if((v*1-1)==e.pageCurrent){x="<span> <strong>"+v+"</strong> </span>"}else{x='<span> <a href="';x+=w?"javascript:void(0)":e.baseUrl.replace(/%page%/i,(v*1-1));x+='">'+v+"</a> </span>"}a(i.tdsPages[u-1]).html(x);if(w){a(i.tdsPages[u-1]).find("a").bind("click",function(){e.baseUrl((a(this).text())*1-1)})}}}function g(){document.onselectstart=function(){return true}}function c(){document.onselectstart=function(){return false};a(i.scrollThumb).focus()}r(this);l();d();f();if(window.addEventListener){window.addEventListener("DOMMouseScroll",t,false)}window.onmousewheel=document.onmousewheel=t;a(this).mouseover(function(){handle=p}).mouseout(function(){handle=null});function p(s){i.scrollThumb.xPos+=5*s*(-1);b();e.returnOrder?o():m()}}})(jQuery);