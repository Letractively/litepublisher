(function(b){b(document).ready(function(){var d=b("a[rel='theme'], a[rel='plugin']");if(d.length){d.each(function(){b(this).data("url",b(this).attr("href"))});var e=function(a,b){var d="itemtype="+b+"&url="+encodeURIComponent(a),i=-1==ltoptions.download_site.indexOf("?")?"?":"&";return ltoptions.download_site+"/admin/service/upload/"+i+d},g=function(a){b.litedialog({title:ltoptions.siteurl_dialog.title,html:ltoptions.siteurl_dialog.html,buttons:[{title:"Ok",click:function(){var c=b.trim(b("input[name='text_download_site']").val());
b.closedialog();""!=c&&set_cookie("download_site",c);f(c);b.isFunction(a)&&a()}},{title:lang.dialog.cancel,click:function(){b.closedialog()}}]})},h=function(){var a=b(this).data("url"),c=b(this).attr("rel");""==ltoptions.download_site&&g(function(){window.location=e(a,c)});return!1},f=function(a){"/"==a.charAt(a.length-1)&&(a=a.substring(0,a.length-1));if(ltoptions.download_site!=a){ltoptions.download_site=a;b("#text_download_site").val(a);var c=b("#yoursite");c.attr("href",a);c.attr("title",a);c.text(a);
""==a?b("a[rel='theme'], a[rel='plugin']").click(h):b("a[rel='theme'], a[rel='plugin']").each(function(){b(this).off("click");var a=b(this).attr("rel"),c=b(this).data("url");b(this).attr("href",e(c,a))})}};b("#change_url").click(function(){g();return!1});(url=function(){var a="";(a=get_get("site"))?set_cookie("download_site",a):a=get_cookie("download_site");return a}())?f(url):(ltoptions.download_site="",d.click(h))}})})(jQuery);
