(function(f,u){function w(a){var c=f.URL||f.webkitURL,b=f.Blob,d=f.Worker;if(!(c&&b&&d&&a))return null;a=new b([a]);return new d(c.createObjectURL(a))}function x(a,c){function b(a){for(var b=[],c=(a.clipboardData||{}).items||[],g=0;g<c.length;g++){var k=c[g].getAsFile();if(k){var n=/\/(.*)/.exec(k.type);!k.name&&n&&(k.name="clipboard"+g+"."+n[1]);b.push(k)}}b.length&&(s(a,b,d),a.preventDefault(),a.stopPropagation())}if(l.enabled){var d=p(p({},l.opts),c);a.addEventListener("paste",b,!1)}}function y(a,
c){function b(b){s(b,a.files,r)}function d(a){a.stopPropagation();a.preventDefault();s(a,a.dataTransfer.files,r)}if(l.enabled){var r=p(p({},l.opts),c);a.addEventListener("change",b,!1);a.addEventListener("drop",d,!1)}}function z(a,c){function b(a){f=!1}function d(a){f=!0}function r(a){a.dataTransfer.files&&a.dataTransfer.files.length&&(a.stopPropagation(),a.preventDefault())}function e(a){return function(){f||a.apply(this,arguments)}}function h(b){b.stopPropagation();b.preventDefault();m&&A(a,m);
s(b,b.dataTransfer.files,q)}function g(b){b.stopPropagation();b.preventDefault();m&&B(a,m)}function k(b){m&&A(a,m)}function n(b){b.stopPropagation();b.preventDefault();m&&B(a,m)}if(l.enabled){var q=p(p({},l.opts),c),m=q.dragClass,f=!1;a.addEventListener("dragenter",e(g),!1);a.addEventListener("dragleave",e(k),!1);a.addEventListener("dragover",e(n),!1);a.addEventListener("drop",e(h),!1);u.body.addEventListener("dragstart",d,!0);u.body.addEventListener("dragend",b,!0);u.body.addEventListener("drop",
r,!1)}}function D(a,c){for(var b=0;b<a.length;b++){var d=a[b],e=d,f=d.name.substring(0,d.name.lastIndexOf(".")),h=d.name.substring(d.name.lastIndexOf(".")+1),g=b,k=E(),n=c,d=d.size,q=Math.floor(Math.log(d)/Math.log(1024)),d=(d/Math.pow(1024,Math.floor(q))).toFixed(2)+" "+"bytes kb MB GB TB PB".split(" ")[q];e.extra={nameNoExtension:f,extension:h,fileID:g,uniqueID:k,groupID:n,prettySize:d}}}function F(a,c,b){for(var d in c)if(a.match(RegExp(d)))return"readAs"+c[d];return"readAs"+b}function s(a,c,b){function d(){h.ended=
new Date;b.on.groupend(h)}function e(){0===--f&&d()}var f=c.length,h={groupID:G(),files:c,started:new Date};l.output.push(h);D(c,h.groupID);b.on.groupstart(h);if(c.length){var g;v&&t&&(g=w(H),g.onmessage=function(a){var c=a.data.file,d=a.data.result;c.extra||(c.extra=a.data.extra);c.extra.ended=new Date;b.on["error"===d?"error":"load"]({target:{result:d}},c);e()});Array.prototype.forEach.call(c,function(c){c.extra.started=new Date;if(b.accept&&!c.type.match(RegExp(b.accept)))b.on.skip(c),e();else if(!1===
b.on.beforestart(c))b.on.skip(c),e();else{var d=F(c.type,b.readAsMap,b.readAsDefault);if(g)g.postMessage({file:c,extra:c.extra,readAs:d});else{var f=new C;f.originalEvent=a;I.forEach(function(a){f["on"+a]=function(d){if("load"==a||"error"==a)c.extra.ended=new Date;b.on[a](d,c);"loadend"==a&&e()}});f[d](c)}}})}else d()}function J(){var a=w(K);a&&(a.onmessage=function(a){t=a.data},a.postMessage({}))}function e(){}function p(a,c){for(var b in c)c[b]&&c[b].constructor&&c[b].constructor===Object?(a[b]=
a[b]||{},arguments.callee(a[b],c[b])):a[b]=c[b];return a}function B(a,c){RegExp("(?:^|\\s+)"+c+"(?:\\s+|$)").test(a.className)||(a.className=a.className?[a.className,c].join(" "):c)}function A(a,c){RegExp("(?:^|\\s+)"+c+"(?:\\s+|$)").test(a.className)&&(a.className=a.className.replace(RegExp("(?:^|\\s+)"+c+"(?:\\s+|$)","g")," ").replace(/^\s\s*/,"").replace(/\s\s*$/,""))}var C=f.FileReader,t=!1,H="self.addEventListener('message', function(e) { var data=e.data; try { var reader = new FileReaderSync; postMessage({ result: reader[data.readAs](data.file), extra: data.extra, file: data.file})} catch(e){ postMessage({ result:'error', extra:data.extra, file:data.file}); } }, false);",
K="onmessage = function(e) { postMessage(!!FileReaderSync); };",I="loadstart progress load abort error loadend".split(" "),v=!1,l=f.FileReaderJS={enabled:!1,setupInput:y,setupDrop:z,setupClipboard:x,setSync:function(a){(v=a)&&!t&&J()},getSync:function(){return v&&t},output:[],opts:{dragClass:"drag",accept:!1,readAsDefault:"BinaryString",readAsMap:{},on:{loadstart:e,progress:e,load:e,abort:e,error:e,loadend:e,skip:e,groupstart:e,groupend:e,beforestart:e}}};"undefined"!==typeof jQuery&&(jQuery.fn.fileReaderJS=
function(a){return this.each(function(){jQuery(this).is("input")?y(this,a):z(this,a)})},jQuery.fn.fileClipboard=function(a){return this.each(function(){x(this,a)})});if(C){var G=function(a){return function(){return a++}}(0),E=function(a){return function(){return a++}}(0);l.enabled=!0}})(this,document);
