(function(b,e){e.Uploader=Class.extend({progressbar:"#progressbar",maxsize:"100",types:"*.*",onsettings:b.noop,onbefore:b.noop,onupload:b.noop,oncomplete:b.noop,before:function(a){var c=b("#combo-idperm_upload");c.length&&a.addPostParam("idperm",c.val());this.onbefore(a)},geturl:function(){return(void 0==ltoptions.uploadurl?ltoptions.url:ltoptions.uploadurl)+"/admin/jsonserver.php?random="+Math.random()},complete:function(){this.oncomplete(this.items);this.items.length=0},init:function(){this.items=
[];var a=void 0==ltoptions.uploadurl?ltoptions.url:ltoptions.uploadurl,c=b.cookie("litepubl_user");c||(c=b.cookie("admin"));var d=this,a={flash_url:a+"/js/swfupload/swfupload.swf",upload_url:a+"/admin/jsonserver.php",post_params:{litepubl_user:c,litepubl_user_id:b.cookie("litepubl_user_id"),method:"files_upload"},file_size_limit:this.maxsize+" MB",file_types:this.types,file_types_description:"All Files",file_upload_limit:0,file_queue_limit:0,button_placeholder_id:"uploadbutton",file_dialog_complete_handler:function(){b(d.progressbar).progressbar({value:0});
this.setUploadURL(d.geturl());d.before(this);this.startUpload()},upload_start_handler:function(){return!0},upload_progress_handler:function(a,c,f){try{var e=Math.ceil(100*(c/f));b(d.progressbar).progressbar("value",e)}catch(h){this.debug(h)}},upload_error_handler:function(a,c,d){b.messagebox(lang.dialog.error,d)},upload_success_handler:function(a,c){try{var e=b.parseJSON(c);d.items.push(e);d.onupload(a,e)}catch(g){alert("error "+g.message)}},upload_complete_handler:function(){try{0===this.getStats().files_queued?
(b(d.progressbar).progressbar("destroy"),d.complete()):this.startUpload()}catch(a){this.debug(a)}}};"en"==ltoptions.lang?(a.button_image_url=ltoptions.files+"/js/swfupload/images/XPButtonUploadText_61x22.png",a.button_width=61,a.button_height=22):(a.button_text='<span class="upload_button">'+lang.posteditor.upload+"</span>",a.button_image_url=ltoptions.files+"/js/swfupload/images/XPButtonNoText_160x22.png",a.button_width=160,a.button_height=22,a.button_text_style=".upload_button { font-family: Helvetica, Arial, sans-serif; font-size: 14pt; text-align: center; }",
a.button_text_top_padding=1,a.button_text_left_padding=5);try{this.onsettings(a),this.uploader=new SWFUpload(a)}catch(e){alert("Error create swfupload "+e.message)}}})})(jQuery,litepubl,window);
