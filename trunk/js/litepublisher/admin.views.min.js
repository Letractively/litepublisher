(function(a,h,n){function k(){for(var b in ltoptions.allviews){var e="#widgets_"+b+"_";a("ul[id^='view_sidebar_"+b+"_']").each(function(){var b=a(this).attr("id").split("_").pop(),d=a.map(a(this).sortable("toArray"),function(a,b){return a.split("_").pop()});a(e+b).val(d.join(","))})}}function g(b){b?a("#appendwidgets").show():a("#appendwidgets").hide()}function l(){var b=a(this).attr("id").split("_");a("div[id^='widgetoptions_"+b[1]+"_']").hide();a("#widgetoptions_"+b[1]+"_"+b[2]).show()}function m(){var b=
a("form:first");a(".admintabs        ",b).each(function(){var e=a(this),c=e.data("custom");if(c&&"idview"in c){c=c.idview;if("1"==c)var d=[];else{var f=a("#checkbox-customsidebar_"+c,e).attr("checked"),d=f?[]:[0];a("#checkbox-disableajax_"+c,e).attr("disabled",f?"disabled":!1)}e.tabs("option",{disabled:d,active:0==d.length?0:1,activate:function(e,c){if(0==c.newTab.index()){var d=a(c.newTab).closest(".admintabs").data("custom").idview,d=a("#appendwidget_"+d,b).data("showlist");g(d)}else g(!1)}})}});
a("input[name^='customsidebar_']",b).click(function(){var b=a(this),c=b.attr("id").split("_").pop(),d=b.attr("checked");a("#checkbox-disableajax_"+c).attr("disabled",d?"disabled":"");b.closest(".admintabs").tabs("option","disabled",d?[]:[0])});a("input[name^='delete_']",b).click(function(){var e=a(this).attr("name").split("_").pop();a.confirmdelete(function(){a("#action",b).val("delete");a("#action_value",b).val(e);b.submit()})});b.submit(function(){"delete"!=a("#hidden-action",b).val()&&(a("#hidden-action",
b).val("widgets"),k())});a(".view_sidebar li",b).click(l);a(".view_sidebars",b).each(function(){a(".view_sidebar",this).sortable({connectWith:a(".view_sidebar",this),receive:function(b,c){if("append_widgets"==a(c.sender).attr("id")){var d=a(c.item).attr("id").split("_").pop();if(1<a("li[id$='_"+d+"']",this).length)a(c.sender).sortable("cancel");else{var f=a(this).attr("id").split("_");f.pop();a(c.item).attr("id","widget_"+f.pop()+"_"+d)}}}})});a("#append_widgets",b).sortable({connectWith:".view_sidebar",
helper:"clone"});a("button[id^='submit-widget_delete_']",b).click(function(){var e=a(this).attr("id").split("_"),c=e.pop(),d=e.pop();a.confirmdelete(function(){a("#widget_"+d+"_"+c,b).remove();a("#widgetoptions_"+d+"_"+c,b).hide()})});a("input[id^='inline_']",b).each(function(){a(this).data("enabled",!a(this).attr("disabled"))});a("input[id^='ajax_']",b).click(function(){var b=a(this).attr("checked"),c="#"+a(this).attr("id").replace("ajax_","inline_");a(c).data("enabled")&&a(c).attr("disabled",b?
"":"disabled")});a("a[id^='appendwidget_']",b).click(function(){var b=!a(this).data("showlist");a(this).data("showlist",b);g(b);return!1})}a(h).ready(function(){m()})})(jQuery,document,window);
