function submit_views(){for(var b=0;b<ltoptions.allviews.length;b++){var a=ltoptions.allviews[b];var c="#widgets_"+a+"_";$("ul[id^='view_sidebar_"+a+"_']").each(function(){var e=$(this).attr("id").split("_").pop();var d=$.map($(this).sortable("toArray"),function(f,g){return f.split("_").pop()});$(c+e).val(d.join(","))})}}function confirm_dialog(b,a){$(b).dialog({autoOpen:true,modal:true,buttons:[{text:"Ok",click:function(){$(this).dialog("close");if($.isFunction(a)){a()}}},{text:"Cancel",click:function(){$(this).dialog("close")}}]})}function show_append_widgets(a){if(a){$("#appendwidgets").show()}else{$("#appendwidgets").hide()}}function widget_clicked(){var b=$(this).attr("id").split("_");$("div[id^='widgetoptions_"+b[1]+"_']").hide();$("#widgetoptions_"+b[1]+"_"+b[2]).show()}function init_views(){if(window.jqloader===undefined){_init_views()}else{var a=jqloader.load(ltoptions.files+"/js/litepublisher/admin."+$.fn.jquery+".min.js");a.done(_init_views)}}function _init_views(){$(document).ready(function(){$("div[rel='tabs']").each(function(){var a=$(this).attr("id").split("_").pop();if(a==1){$("#customsidebar_1").attr("disabled","disabled");$("#disableajax_1").attr("disabled","disabled");$("#delete_1").attr("disabled","disabled");var b=[]}else{var c=$(this).attr("checked");var b=c?[]:[0];$("#disableajax_"+a).attr("disabled",c?"disabled":"")}$(this).tabs({cache:true,disabled:b,selected:b.length==0?0:1,show:function(f,g){if(g.index==0){var d=$(g.panel).attr("id").split("_").pop();var e=$("#appendwidget_"+d).data("showlist");show_append_widgets(e)}else{show_append_widgets(false)}}})});$("input[id^='customsidebar_']").click(function(){var a=$(this).attr("id").split("_").pop();var b=$(this).attr("checked");$("#disableajax_"+a).attr("disabled",b?"disabled":"");$("#viewtab_"+a).tabs("option","disabled",b?[]:[0])});$("#allviewtabs").tabs({cache:true});$("input[id^='delete_']").click(function(){var a=$(this).attr("id").split("_").pop();confirm_dialog("#dialog_view_delete",function(){$("#action").val("delete");$("#action_value").val(a);$("#form").submit()})});$("#form").submit(function(){if("delete"==$("#action").val()){return}$("#action").val("widgets");submit_views()});$(".view_sidebar li").click(widget_clicked);$(".view_sidebars").each(function(){$(".view_sidebar",this).sortable({connectWith:$(".view_sidebar",this),receive:function(c,d){if($(d.sender).attr("id")=="append_widgets"){var e=$(d.item).attr("id").split("_").pop();if($("li[id$='_"+e+"']",this).length>1){$(d.sender).sortable("cancel")}else{var b=$(this).attr("id").split("_");b.pop();$(d.item).attr("id","widget_"+b.pop()+"_"+e)}}}})});$("#append_widgets").sortable({connectWith:".view_sidebar",helper:"clone"});$("input[id^='widget_delete_']").click(function(){var b=$(this).attr("id").split("_");var d=b.pop();var c=b.pop();confirm_dialog("#dialog_widget_delete",function(){$("#widget_"+c+"_"+d).remove();$("#widgetoptions_"+c+"_"+d).hide()})});$("input[id^='inline_']").each(function(){$(this).data("enabled",!$(this).attr("disabled"))});$("input[id^='ajax_']").click(function(){var a=$(this).attr("checked");var b="#"+$(this).attr("id").replace("ajax_","inline_");if($(b).data("enabled")){$(b).attr("disabled",a?"":"disabled")}});$("a[id^='appendwidget_']").click(function(){var a=!$(this).data("showlist");$(this).data("showlist",a);show_append_widgets(a);return false})})};