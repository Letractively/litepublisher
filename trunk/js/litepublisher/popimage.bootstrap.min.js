(function(e,p,q){e.fn.popimage=function(b){b=e.extend({title:"Image",cursorclass:"cursor-loading",width:40,height:30},b);var h=!1,m=/\.(jpg|jpeg|png|bmp)$/;return this.each(function(){var k=e(this);h&&(k.data("prevlink",h),h.data("nextlink",k));h=k;k.one("mouseenter.popinit focus.popinit click.popinit",function(h){var c=e(this);c.off(".popinit");c.addClass(b.cursorclass);var l=c.attr("href");if(m.test(l))var n=" click";else{if("click"==h.type)return;n="";l=c.data("image")}var d=new Image;d.onload=
function(){c.removeClass(b.cursorclass);if(100>b.width)var a=Math.floor(e(p).width()*b.width/100),f=Math.floor(a*b.height/b.width);else a=b.width,f=b.height;if(d.width<=a&&d.height<=f)a=d.width,f=d.height;else{var g=d.width/d.height;a/f>g?a=Math.floor(f*g):f=Math.floor(a/g)}g=c.attr("title");m.test(g)&&(g=b.title);c.popover({container:"body",content:'<img src="'+l+'" width="'+a+'" height="'+f+'" />',html:!0,placement:"auto bottom",title:g,trigger:"hover focus"+n});c.popover("show");if(a=c.data("nextlink"))(new Image).src=
a.attr("href");if(a=k.data("prevlink"))(new Image).src=a.attr("href")};d.onerror=function(){alert("Error load image")};d.src=l;return!1})})};e(q).ready(function(){e("a.photo").popimage()})})(jQuery,window,document);
