(function(g,q,r){g.fn.popimage=function(b){b=g.extend({title:"",cursorclass:"cursor-loading",width:40,height:30},b);var m=!1,h=!1,n=/\.(jpg|jpeg|png|bmp)$/;return this.each(function(){var k=g(this);h&&(k.data("prevlink",h),h.data("nextlink",k));h=k;k.one("mouseenter.popinit focus.popinit click.popinit",function(h){var c=g(this);c.off(".popinit");c.addClass(b.cursorclass);var l=c.attr("href");if(n.test(l))var p=" click";else{if("click"==h.type)return;p="";l=c.data("image")}var d=new Image;d.onload=
function(){c.removeClass(b.cursorclass);if(100>b.width)var a=Math.floor(g(q).width()*b.width/100),e=Math.floor(a*b.height/b.width);else a=b.width,e=b.height;if(d.width<=a&&d.height<=e)a=d.width,e=d.height;else{var f=d.width/d.height;a/e>f?a=Math.floor(e*f):e=Math.floor(a/f)}f=c.attr("title");n.test(f)&&(f=b.title);c.popover({container:"body",content:'<img src="'+l+'" width="'+a+'" height="'+e+'" />',html:!0,placement:"auto bottom",template:'<div class="popover popover-image"><div class="arrow"></div><h3 class="popover-title" style="max-width:'+
a+'px;"></h3><div class="popover-content"></div></div>',title:f,trigger:"hover focus"+p}).on("show.bs.popover",function(){m=!0}).on("hide.bs.popover",function(){m=!1});m||c.popover("show");if(a=c.data("nextlink"))(new Image).src=a.attr("href");if(a=k.data("prevlink"))(new Image).src=a.attr("href")};d.onerror=function(){alert("Error load image")};d.src=l;return!1})})};ready2(function(){g("a.photo").popimage()})})(jQuery,window,document);
