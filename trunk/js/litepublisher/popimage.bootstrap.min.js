(function(b,l,m){b.fn.popimage=function(f){f=b.extend({width:40,height:30},f);var d=!1;b(this).each(function(){var g=b(this);d&&(g.data("prevlink",d),d.data("nextlink",g));d=g;g.one("hover focus click",function(){var h=b(this),d=h.attr("href"),c=new Image;c.onload=function(){if(100>f.width)var a=Math.floor(100*b(l).width()/option.width),e=Math.floor(100*b(l).height()/f.height);else a=f.width,e=f.height;if(c.width<=a&&c.height<=e)a=c.width,e=c.height;else{var k=c.width/c.height;a/e>k?a=Math.floor(e*
k):e=Math.floor(a/k)}h.popover({container:"body",content:'<img src="'+d+'" width="'+a+'" height="'+e+'" />',delay:{show:100,hide:100},html:!0,placement:"auto bottom",title:h.attr("title"),trigger:"hover focus click"});h.popover("show");if(a=h.data("nextlink"))(new Image).src=a.attr("href");if(a=g.data("prevlink"))(new Image).src=a.attr("href")};c.onerror=function(){alert("Error load image")};c.src=d})});return this};b(m).ready(function(){b("a.popimage").popimage()})})(jQuery,window,document);
