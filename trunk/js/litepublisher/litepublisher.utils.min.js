(function(b,h,f){var g=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,k=g.exec(ltoptions.url),g=g.exec(location.href.toLowerCase())||[];k[2]!=g[2]&&(ltoptions.url=ltoptions.url.replace(k[2],g[2]),ltoptions.files=ltoptions.files.replace(k[2],g[2]));f.litepubl={tml:{},guid:b.now(),adminpanel:!1,is_adminpanel:function(){return!1!==litepubl.adminpanel?litepubl.adminpanel:litepubl.adminpanel=litepubl.is_admin_url(location.href)},is_admin_url:function(a){a=a.toLowerCase();"http"==a.substring(0,4)&&(a=a.substring(10));
a=a.split("/");return 2>=a.length||"admin"!=a[1]||""==a[2]?0:/^(login|logout|password|reguser)$/.test(a[2])?0:1},user:0,getuser:function(){litepubl.user||(litepubl.user={id:parseInt(b.cookie("litepubl_user_id")),pass:b.cookie("litepubl_user"),regservice:b.cookie("litepubl_regservice")});return litepubl.user},stat:function(a,c){},getjson:function(a,c){return b.ajax({type:"get",url:ltoptions.url+"/admin/jsonserver.php",data:a,success:c,dataType:"json",cache:"cache"in a?a.cache:!0})},_onnew:{},_oninit:{},
newinstance:function(a,c){var b=litepubl;if(a in b._onnew){var e={varname:a,fn:c};b._onnew[a].fire(e);delete b._onnew[a];c=e.fn}e=new c;b[a]=e;a in b._oninit&&(b._oninit[a].fire(e),delete b._oninit[a]);return e},oninit:function(a,c){var d=litepubl;if(a in d)return c(d[a]);a in d._oninit||(d._oninit[a]=b.Callbacks());d._oninit[a].add(c)},onnew:function(a,c){var d=llitepubl;if(a in d)return!1;a in d._onnew||(d._onnew[a]=b.Callbacks());d._onnew[a].add(c)}};f.dump=function(a){alert(JSON.stringify(a))};
f.get_get=function(a,b){for(var d=(b?b.substring(b.indexOf("?")+1):f.location.search.substring(1)).split("&"),e=0,l=d.length;e<l;e++){var g=d[e].split("=");if(a==g[0])return decodeURIComponent(g[1])}return!1};f.get_cookie=function(a){return b.cookie(a)};f.set_cookie=function(a,c,d){b.cookie(a,c,{path:"/",expires:d?d:3650})};f.$ready=function(a){b(h).ready(a)};f.ready2=function(a){b(h).ready(function(){f.setTimeout(a,20)})};f.erralert=function(a){alert("error "+a.message)};b.extend({load_script:function(a,
c){return b.ajax({type:"get",url:a,data:void 0,success:c,dataType:"script",cache:!0})},load_css:function(a){b('<link rel="stylesheet" type="text/css" href="'+a+'" />').appendTo("head:first")},uiscript:!1,load_ui:function(a){if(!b.uiscript){var c=ltoptions.files+"/js/jquery/ui-"+ltoptions.jqueryui_version;b.load_css(c+"/redmond/jquery-ui-"+ltoptions.jqueryui_version+".custom.css");b.uiscript=b.load_script(c+"/jquery-ui-"+ltoptions.jqueryui_version+".custom.min.js")}b.isFunction(a)&&b.uiscript.done(a)},
litejson:function(a,c){return b.litejsontype("get",a,c)},litejsonpost:function(a,c){return b.litejsontype("post",a,c)},litejsontype:function(a,c,d){var e=b.cookie("litepubl_user");""!=e&&(c.litepubl_user=e,e=b.cookie("litepubl_user_id"),""!=e&&(c.litepubl_user_id=e));"post"!=a&&(a="get");var e="cache"in c?c.cache:!1,f="";e||"post"!=a||(f="?_="+litepubl.guid++);return b.ajax({type:a,url:ltoptions.url+"/admin/jsonserver.php"+f,data:c,success:d,dataType:"json",cache:e})},onEscape:function(a){b(h).off("keydown.onEscape").on("keydown.onEscape",
function(c){27==c.keyCode&&(b.isFunction(a)&&a(),c.preventDefault(),b(h).off("keydown.onEscape"))})}});b.links={isready:!1,links:!1,list:!1,on:function(a,c){var d=b.links;if(d.isready)d.links.filter(a).on("click",c);else d.list||(d.list=[]),d.list.push({filter:a,fn:c}),b(h).ready(function(){var a=b("a");d.links=a;d.isready=!0;for(var c=d.list,f=0,g=c.length;f<g;f++){var h=c[f];a.filter(h.filter).on("click",h.fn)}d.list=!1})}};b.fn.replaceComment=function(a){a=void 0==a?b(this.get(0).nodeValue):b(a);
b(this).before(a).remove();return a};b.fn.findcomment=function(a){return b.findcomment(this.get(0),a?"widgetcontent-"+a:!1)};b.findcomment=function(a,c){var d=!1;do if(d=b.nextcomment(a,c))return d;while(a=a.parentNode);return!1};b.nextcomment=function(a,c){do{if(8==a.nodeType&&(!c||c==a.nodeValue))return a;if(a.firstChild&&(result=b.nextcomment(a.firstChild,c)))return result}while(a=a.nextSibling);return!1}})(jQuery,document,window);
