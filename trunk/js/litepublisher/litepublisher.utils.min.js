(function(b,g,f){var e=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,h=e.exec(ltoptions.url),e=e.exec(location.href.toLowerCase())||[];h[2]!=e[2]&&(ltoptions.url=ltoptions.url.replace(h[2],e[2]),ltoptions.files=ltoptions.files.replace(h[2],e[2]));ltoptions.ajaxurl=ltoptions.url.substring(ltoptions.url.indexOf(":")+1);f.litepubl={guid:b.now(),tml:{},adminpanel:!1,is_adminpanel:function(){return!1!==litepubl.adminpanel?litepubl.adminpanel:litepubl.adminpanel=litepubl.is_admin_url(location.href)},is_admin_url:function(a){a=
a.toLowerCase();var d=a.indexOf("://");0<=d&&(a=a.substring(d+4));a=a.split("/");return 2>=a.length||"admin"!=a[1]||""==a[2]?0:/^(login|logout|password|reguser)$/.test(a[2])?0:1},user:0,getuser:function(){var a=litepubl;return a.user?a.user:a.user={id:parseInt(b.cookie("litepubl_user_id")),pass:b.cookie("litepubl_user"),regservice:b.cookie("litepubl_regservice")}},stat:function(a,d){},getjson:function(a,d){return b.ajax({type:"get",url:ltoptions.ajaxurl+"/admin/jsonserver.php",data:a,success:d,dataType:"json",
cache:"cache"in a?a.cache:!0})},_onnew:{},_oninit:{},newinstance:function(a,d){var c=litepubl;if(a in c._onnew){var b={varname:a,fn:d};c._onnew[a].fire(b);delete c._onnew[a];d=b.fn}b=new d;c[a]=b;a in c._oninit&&(c._oninit[a].fire(b),delete c._oninit[a]);return b},oninit:function(a,d){var c=litepubl;if(a in c)return d(c[a]);a in c._oninit||(c._oninit[a]=b.Callbacks());c._oninit[a].add(d)},onnew:function(a,d){var c=llitepubl;if(a in c)return!1;a in c._onnew||(c._onnew[a]=b.Callbacks());c._onnew[a].add(d)}};
f.dump=function(a){alert(JSON.stringify(a))};f.get_get=function(a,b){for(var c=(b?b.substring(b.indexOf("?")+1):f.location.search.substring(1)).split("&"),k=0,l=c.length;k<l;k++){var e=c[k].split("=");if(a==e[0])return decodeURIComponent(e[1])}return!1};f.get_cookie=function(a){return b.cookie(a)};f.set_cookie=function(a,d,c){b.cookie(a,d,{path:"/",expires:c?c:3650,secure:"secure"in ltoptions?ltoptions.secure:!1})};f.$ready=function(a){b(g).ready(a)};f.erralert=function(a){alert("error "+a.message)};
b.extend({load_script:function(a,d){return b.ajax({type:"get",url:a,data:void 0,success:d,dataType:"script",cache:!0})},hasprop:function(a,b){return"object"===typeof a&&b in a},jsonrpc:function(a){a=b.extend({type:"post",method:"",params:{},slave:!1,callback:!1,error:!1,cache:!1},a);var d=a.params,c=litepubl.getuser();c.id&&(d.litepubl_user_id=c.id,d.litepubl_user=c.pass,d.litepubl_user_regservice=c.regservice);a.slave&&(d.slave={method:a.slave.method,params:a.slave.params});c={type:a.type,url:ltoptions.ajaxurl+
"/admin/jsonserver.php",cache:a.cache,dataType:"json",success:function(c){if("object"===typeof c)if("result"in c){if(b.isFunction(a.callback)&&a.callback(c.result),a.slave&&b.hasprop(c.result,"slave")){var d=a.slave;c=c.result.slave;b.hasprop(c,"error")?b.hasprop(d,"error")&&b.isFunction(d.error)&&d.error(c.error.message,c.error.code):b.hasprop(d,"callback")&&b.isFunction(d.callback)&&d.callback(c)}}else"error"in c&&b.isFunction(a.error)&&a.error(c.error.message,c.error.code)}};"post"==a.type?(a.cache||
(c.url=c.url+"?_="+litepubl.guid++),c.data=b.toJSON({jsonrpc:"2.0",method:a.method,params:d,id:litepubl.guid++})):(c.type="get",d.method=a.method,c.data=d);return b.ajax(c).fail(function(c,d,e){b.isFunction(a.error)&&a.error(c.responseText,c.status)})},onEscape:function(a){b(g).off("keydown.onEscape").on("keydown.onEscape",function(d){27==d.keyCode&&(b.isFunction(a)&&a(),d.preventDefault(),b(g).off("keydown.onEscape"))})}});b.fn.replaceComment=function(a){a=void 0==a?b(this.get(0).nodeValue):b(a);
b(this).before(a).remove();return a};b.fn.findcomment=function(a){return b.findcomment(this.get(0),a?"widgetcontent-"+a:!1)};b.findcomment=function(a,d){var c=!1;do if(c=b.nextcomment(a,d))return c;while(a=a.parentNode);return!1};b.nextcomment=function(a,d){var c=!1;do{if(8==a.nodeType&&(!d||d==a.nodeValue))return a;if(a.firstChild&&(c=b.nextcomment(a.firstChild,d)))return c}while(a=a.nextSibling);return!1};b.css_loader={links:[],counter:0,timer:!1,add:function(a){a=b('<link rel="stylesheet" type="text/css" media="only x" href="'+
a+'" />').appendTo("head:first").get(0);this.ready(a)||(this.links.push(a),this.counter=60,this.timer||(this.timer=setInterval(b.proxy(this.wait,this),50)))},wait:function(){for(var a=this.links,b=a.length-1;0<=b;b--)this.ready(a[b])?a.splice(b,1):this.counter||(a[b].media="all");if(!a.length||0>this.counter--)clearInterval(this.timer),this.counter=this.timer=0,a.length=0},ready:function(a){for(var b=a.href,c=g.styleSheets,e=0,f=c.length;e<f;e++)if(c[e].href&&0<=c[e].href.indexOf(b))return a.media=
"all",!0;return!1}};b.load_css=b.proxy(b.css_loader.add,b.css_loader)})(jQuery,document,window);
