(function(a,f){a(f).ready(function(){var e=a(".audiofile"),d=a(".videofile");if(e.length||d.length)litepubl.Mediaplayer=Class.extend({tml:{audio:'<audio id="player-$id" src="$link" type="$mime" controls="controls"></audio>',video:'<video src="%%siteurl%%/files/%%file.filename%%" type="%%file.mime%%" controls="controls" autoplay="autoplay"></video>',pretty:'<div id="pretty-video-holder"></div>',holder:"#pretty-video-holder"},clicked:!1,script:!1,ready:function(b){this.script?this.script.done(b):(a.load_css(ltoptions.files+
"/js/mediaelement/css/mediaelementplayer.min.css"),this.script=a.load_script(ltoptions.files+"/js/mediaelement/videoplayer.min.js",b))},init:function(a){if(a.length){var c=this;this.ready(function(){c.init_audio(e)})}d.length&&this.init_video(d)},init_audio:function(){a("audio",media).mediaplayer({audioWidth:400,audioHeight:30,startVolume:1})},init_video:function(b){var c=this,d=this.tml;b.on("click.playvideo",function(b){c.clicked=a(this);b.preventDefault()});b.prettyPhoto({custom_markup:d.pretty,
default_width:options.width,opacity:0.6,modal:!0,deeplinking:!1,keyboard_shortcuts:!1,show_title:!1,social_tools:!1,callback:function(){a(f).off("keydown.onEscape");c.clicked=!1},changepicturecallback:function(){a.onEscape(a.prettyPhoto.close);c.ready(function(){c.init_mediaelement()})}})},init_mediaelement:function(){var b=this.tml,c=a.simpletml(b.video,{file:self.clicked.data("file"),siteurl:ltoptions.files});a(c).appendTo(b.holder).videoplayer({})}}),litepubl.mediaplayer=new litepubl.Mediaplayer(e,
d)})})(jQuery,document,window);
