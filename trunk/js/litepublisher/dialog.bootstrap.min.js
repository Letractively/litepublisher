(function(a,h){a.BootstrapDialog=Class.extend({tml:'<div class="modal fade" id="dialog-%%id%%" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title">%%title%%</h4></div><div class="modal-body">%%body%%</div><div class="modal-footer">%%buttons%%</div></div></div></div>',button:'<button type="button" class="btn btn-default" id="%%id%%">%%title%%</button>',
init:function(){this.id=a.now();this.stack=[];var e=this;this.options={title:"",html:"",width:300,open:a.noop,close:a.noop,buttons:[{title:"Ok",click:function(){e.close()}}]};a.closedialog=a.proxy(this.close,this);a.litedialog=a.proxy(this.open,this)},close:function(){if(!this.stack.length)return!1;this.stack.pop().modal("hide")},remove:function(a){for(var c=this.stack,b=c.length-1;0<=b;b--)if(a==c[b]){c.splice(b,1);a.remove();break}},open:function(e){var c=this.id++,b=a.extend({},this.options,e),
f="";e="button-"+c+"-";for(var d=0,g=b.buttons.length;d<g;d++)f+=this.button.replace(/%%id%%/g,e+d).replace(/%%title%%/g,b.buttons[d].title);1==g&&(f=f.replace(/%%btn-default%%/g,"btn-primary"));c=a.simpletml(this.tml,{id:c,title:b.title,body:b.html,buttons:f});c=a(c).appendTo("body");d=0;for(g=b.buttons.length;d<g;d++)a("#"+e+d,c).data("index",d).on("click.dialog",b.buttons[d].click);this.stack.push(c);c.modal().on("shown.bs.modal",function(){a.isFunction(b.open)&&b.open(a(".pp_inline"))});var h=
this;c.on("hidden.bs.modal",function(){a.isFunction(b.close)&&b.close();h.remove(a(this))});return b}});a(h).ready(function(){"modal"in a.fn&&(a.bootstrapDialog=new a.BootstrapDialog)})})(jQuery,document);
