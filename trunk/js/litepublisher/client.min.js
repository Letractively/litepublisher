var client;var widgets={items:[]};function createclient(){return new rpc.ServiceProxy(ltoptions.pingback,{asynchronous:true,protocol:"XML-RPC",sanitize:false,methods:["litepublisher.getwidget","litepublisher.moderate","litepublisher.deletecomment","litepublisher.comments.setstatus","litepublisher.comments.add","litepublisher.comments.get","litepublisher.comments.edit","litepublisher.comments.reply","litepublisher.comments.getrecent","litepublisher.files.getbrowser","litepublisher.files.getpage","litepublisher.files.geticons","litepublisher.files.getthemes"]})}widgets.load=function(c,b,a){var d=resolvetag(a,"ul");if(!d){return alert("Widget not found")}widgets.add(c,d);if(client==undefined){client=createclient()}client.litepublisher.getwidget({params:[b],onSuccess:function(e){if(e&&(e!="false")){d.innerHTML=e}else{}},onException:function(e){},onComplete:function(e){}})};widgets.add=function(a,b){a.onclick=widgets.hide;widgets.items.push([a,b])};widgets.setvisible=function(b,d){try{for(var a=widgets.items.length-1;a>=0;a--){if(b==widgets.items[a][0]){var c=widgets.items[a][1];break}}if(d){c.style.visibility="visible";b.onclick=widgets.hide}else{c.style.visibility="hidden";b.onclick=widgets.show}}catch(f){alert(f.message)}};widgets.hide=function(){widgets.setvisible(this,false)};widgets.show=function(a){widgets.setvisible(this,true)};function findnexttag(b,a){while(b=b.nextSibling){if(b.tagName.toLowerCase()==a){return b}}return false}function resolvetag(c,a){try{if(typeof(c)=="string"){return document.getElementById(c)}else{if(result=findnexttag(c,a)){return result}if(result=findnexttag(c.parentNode,a)){return result}if(result=findnexttag(c.parentNode.parentNode,a)){return result}}return false}catch(b){return false}}function loadjavascript(b){if(ltoptions.scripts==undefined){ltoptions.scripts=""}if(ltoptions.scripts.indexOf(b)>=0){return false}ltoptions.scripts+=b+"\n";var c=document.getElementsByTagName("head")[0];var a=document.createElement("script");a.type="text/javascript";a.src=ltoptions.files+b;c.appendChild(a);return true}function audioplayerloaded(){AudioPlayer.setup(ltoptions.files+"/js/audio-player/player.swf",{width:290});if(ltoptions.audiofile!=undefined){playaudiofile(ltoptions.audiofile[0],ltoptions.audiofile[1])}else{ltoptions.audiofile=true}}function playaudiofile(b,a){if(ltoptions.audiofile==undefined){ltoptions.audiofile=new Array(b,a);loadjavascript("/js/audio-player/audio-player.js")}else{AudioPlayer.embed(b,{soundFile:a,autostart:"yes",initialvolume:100})}};