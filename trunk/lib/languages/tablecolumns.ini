<script type="text/javascript">
  $(document).ready(function() {
  $("input[name^='checkbox-showcolumn-']").click(function() {
var index = $(this).val();
var sel = 'td:nth-child(' + index + '),th:nth-child(' + index + ')';
if ($(this).attr("checked")) {
$(sel).show();
} else {
$(sel).hide();
}
});

  $("input[name='invert_checkbox']").click(function() {
    $(this).closest("form").find("input:checkbox").each(function() {
if ('togglecolumn' != $(this).attr('rel')) {
      $(this).attr("checked", ! $(this).attr("checked"));
}
    });
    $(this).attr("checked", false);
  });
});
</script>

<style type="text/css">
.itemcheck {text-align: center;}
$style
</style>

<form action="" method="post" name="form">
<input type="hidden" name="changed_hidden" value="1" />
<p>$checkboxes</p>
<table class="classictable">
	<thead>
	<tr>
		<th class="itemcheck"><input type="checkbox" name="invert_checkbox" /></th>
$head
		</tr>
	</thead>
<tbody>
$body
</tbody >
</table>
$buttons
</form>
