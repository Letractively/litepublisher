function submit_views(){for(var a=0;a<ltoptions.allviews.length;a++){var b=ltoptions.allviews[a],c="#widgets_"+b+"_";$("ul[id^='view_sidebar_"+b+"_']").each(function(){var a=$(this).attr("id").split("_").pop(),b=$.map($(this).sortable("toArray"),function(a,b){return a.split("_").pop()});$(c+a).val(b.join(","))})}}function show_append_widgets(a){a?$("#appendwidgets").show():$("#appendwidgets").hide()}
function widget_clicked(){var a=$(this).attr("id").split("_");$("div[id^='widgetoptions_"+a[1]+"_']").hide();$("#widgetoptions_"+a[1]+"_"+a[2]).show()}
function _init_views(){$(document).ready(function(){$("div.admintabs").each(function(){var a=$(this).attr("id").split("_").pop();if("1"==a){$("#customsidebar_1").attr("disabled","disabled");$("#disableajax_1").attr("disabled","disabled");$("#delete_1").attr("disabled","disabled");var b=[]}else{var c=$("#customsidebar_"+a).attr("checked"),b=c?[]:[0];$("#disableajax_"+a).attr("disabled",c?"disabled":!1)}$(this).tabs({beforeLoad:litepubl.uibefore,disabled:b,active:0==b.length?0:1,activate:function(a,
b){if(0==b.newTab.index()){var c=$(b.newPanel).attr("id").split("_").pop(),c=$("#appendwidget_"+c).data("showlist");show_append_widgets(c)}else show_append_widgets(!1)}})});$("input[id^='customsidebar_']").click(function(){var a=$(this).attr("id").split("_").pop(),b=$(this).attr("checked");$("#disableajax_"+a).attr("disabled",b?"disabled":"");$("#viewtab_"+a).tabs("option","disabled",b?[]:[0])});$("#allviewtabs").tabs({beforeLoad:litepubl.uibefore});$("input[id^='delete_']").click(function(){var a=
$(this).attr("id").split("_").pop();$.confirmdelete(function(){$("#action").val("delete");$("#action_value").val(a);$("#form").submit()})});$("#form").submit(function(){"delete"!=$("#action").val()&&($("#action").val("widgets"),submit_views())});$(".view_sidebar li").click(widget_clicked);$(".view_sidebars").each(function(){$(".view_sidebar",this).sortable({connectWith:$(".view_sidebar",this),receive:function(a,b){if("append_widgets"==$(b.sender).attr("id")){var c=$(b.item).attr("id").split("_").pop();
if(1<$("li[id$='_"+c+"']",this).length)$(b.sender).sortable("cancel");else{var d=$(this).attr("id").split("_");d.pop();$(b.item).attr("id","widget_"+d.pop()+"_"+c)}}}})});$("#append_widgets").sortable({connectWith:".view_sidebar",helper:"clone"});$("input[id^='widget_delete_']").click(function(){var a=$(this).attr("id").split("_"),b=a.pop(),c=a.pop();$.confirmdelete(function(){$("#widget_"+c+"_"+b).remove();$("#widgetoptions_"+c+"_"+b).hide()})});$("input[id^='inline_']").each(function(){$(this).data("enabled",
!$(this).attr("disabled"))});$("input[id^='ajax_']").click(function(){var a=$(this).attr("checked"),b="#"+$(this).attr("id").replace("ajax_","inline_");$(b).data("enabled")&&$(b).attr("disabled",a?"":"disabled")});$("a[id^='appendwidget_']").click(function(){var a=!$(this).data("showlist");$(this).data("showlist",a);show_append_widgets(a);return!1})})}if(void 0===window.jqloader)_init_views();else{var script=window.jqloader.load(ltoptions.files+"/js/litepublisher/admin."+$.fn.jquery+".min.js");script.done(_init_views)};
