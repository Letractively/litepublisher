function widget_load(b,a,c){$(b).attr("onclick","");var d=widget_findcomment(b,a);if(!d)return alert("Widget not found");$.get(ltoptions.url+"/getwidget.htm",{id:a,sidebar:c,themename:ltoptions.theme.name,idurl:ltoptions.idurl},function(a){widget_add(b,$(d).replaceComment(a))},"html")}function widget_findcomment(b,a){var c=!1;a&&(a="widgetcontent-"+a);do for(c=b;c=c.nextSibling;)if(8==c.nodeType&&(!a||a==c.nodeValue))return c;while(b=b.parentNode);return!1}
function widget_inline(b){var a=widget_findcomment(b,!1);if(!a)return alert("Widget not found");widget_add(b,$(a).replaceComment())}function widget_add(b,a){$(b).data("litepublisher_widget",a);$(b).click(function(){widget_toggle(this);return!1})}function widget_toggle(b){$(b).data("litepublisher_widget").slideToggle()}
$(document).ready(function(){$("*[rel~='inlinewidget']").one("click",function(){widget_inline(this);return!1});var b='<a class="expandwidget" href="">'+lang.widgetlang.expand+"</a>";$(".inlinewidget, .ajaxwidget").each(function(){$(b).appendTo(this).one("click",function(){if($(this).parent().hasClass("inlinewidget"))widget_inline(this);else{var a=$(this).parent().attr("rel").split("-");widget_load(this,a[1],a[2])}return!1}).click(function(){var a=$(this);a.toggleClass("expandwidget colapsewidget");
a.text(a.hasClass("expandwidget")?lang.widgetlang.expand:lang.widgetlang.colapse);return!1})});$(".widget-load").one("click",function(){var a=$(this);widget_load(this,a.data("idwidget"),a.data("sidebar"));return!1})});
