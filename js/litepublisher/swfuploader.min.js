function fileDialogComplete(){$("#progressbar").progressbar({value:0});this.setUploadURL((void 0==ltoptions.uploadurl?ltoptions.url:ltoptions.uploadurl)+"/admin/ajaxposteditor.htm?get=upload&id="+ltoptions.idpost+"&random="+Math.random());var a=$("#combo-idperm_upload");a.length&&this.addPostParam("idperm",a.val());this.startUpload()}function uploadStart(){return!0}function uploadProgress(a,b,d){try{var c=Math.ceil(100*(b/d));$("#progressbar").progressbar("value",c)}catch(e){this.debug(e)}}
function uploadError(){alert("uploadError")}function uploadComplete(){try{0===this.getStats().files_queued?$("#progressbar").progressbar("destroy"):this.startUpload()}catch(a){this.debug(a)}}
function uploadSuccess(a,b){var d=0<$("#newfilestab").children().length;$("#newfilestab").append(b);var c=$("#newfilestab").children(":last").html();d&&($("#newfilestab").children(":last").remove(),$("#newfilestab").children(":first").append(c));c=str_replace(["uploaded-","new-post-","newfile-"],["curfile-","curpost-","currentfile-"],c);$("#currentfilestab > :first").append(c)}
function createswfu(){var a=void 0==ltoptions.uploadurl?ltoptions.url:ltoptions.uploadurl,b=get_cookie("litepubl_user");""==b&&(b=get_cookie("admin"));a={flash_url:a+"/js/swfupload/swfupload.swf",upload_url:a+"/admin/ajaxposteditor.htm?get=upload&id="+ltoptions.idpost,post_params:{litepubl_user:b,litepubl_user_id:get_cookie("litepubl_user_id")},file_size_limit:"100 MB",file_types:"*.*",file_types_description:"All Files",file_upload_limit:0,file_queue_limit:0,button_image_url:ltoptions.files+"/js/swfupload/images/XPButtonUploadText_61x22.png",
button_placeholder_id:"uploadbutton",button_width:61,button_height:22,file_dialog_complete_handler:fileDialogComplete,upload_start_handler:uploadStart,upload_progress_handler:uploadProgress,upload_error_handler:uploadError,upload_success_handler:uploadSuccess,upload_complete_handler:uploadComplete};"en"!=ltoptions.language&&(a.button_text='<span class="upload_button">'+ltoptions.upload_button_text+"</span>",a.button_image_url=ltoptions.files+"/js/swfupload/images/XPButtonNoText_160x22.png",a.button_width=
160,a.button_text_style=".upload_button { font-family: Helvetica, Arial, sans-serif; font-size: 14pt; text-align: center; }",a.button_text_top_padding=1,a.button_text_left_padding=5);try{return new SWFUpload(a)}catch(d){alert("Error create swfupload "+d.message)}};
