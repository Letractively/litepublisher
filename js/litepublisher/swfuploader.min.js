function fileDialogComplete(a,d){$("#progressbar").progressbar({value:0});var b=ltoptions.uploadurl==undefined?ltoptions.url:ltoptions.uploadurl;this.setUploadURL(b+"/admin/ajaxposteditor.htm?get=upload&id="+ltoptions.idpost+"&random="+Math.random());var c=$("#combo-idperm_upload");if(c.length){this.addPostParam("idperm",c.val())}this.startUpload()}function uploadStart(a){return true}function uploadProgress(b,e,d){try{var c=Math.ceil((e/d)*100);$("#progressbar").progressbar("value",c)}catch(a){this.debug(a)}}function uploadError(a,c,b){alert("uploadError")}function uploadComplete(b){try{if(this.getStats().files_queued===0){$("#progressbar").progressbar("destroy")}else{this.startUpload()}}catch(a){this.debug(a)}}function uploadSuccess(c,a){var d=$("#newfilestab").children().length>0;$("#newfilestab").append(a);var b=$("#newfilestab").children(":last").html();if(d){$("#newfilestab").children(":last").remove();$("#newfilestab").children(":first").append(b)}b=str_replace(["uploaded-","new-post-","newfile-"],["curfile-","curpost-","currentfile-"],b);$("#currentfilestab > :first").append(b)}function createswfu(){var a=ltoptions.uploadurl==undefined?ltoptions.url:ltoptions.uploadurl;var b=get_cookie("litepubl_user");if(b==""){b=get_cookie("admin")}var c={flash_url:a+"/js/swfupload/swfupload.swf",upload_url:a+"/admin/ajaxposteditor.htm?get=upload&id="+ltoptions.idpost,post_params:{litepubl_user:b},file_size_limit:"100 MB",file_types:"*.*",file_types_description:"All Files",file_upload_limit:0,file_queue_limit:0,button_image_url:ltoptions.files+"/js/swfupload/images/XPButtonUploadText_61x22.png",button_placeholder_id:"uploadbutton",button_width:61,button_height:22,file_dialog_complete_handler:fileDialogComplete,upload_start_handler:uploadStart,upload_progress_handler:uploadProgress,upload_error_handler:uploadError,upload_success_handler:uploadSuccess,upload_complete_handler:uploadComplete};if(ltoptions.language!="en"){c.button_text='<span class="upload_button">'+ltoptions.upload_button_text+"</span>";c.button_image_url=ltoptions.files+"/js/swfupload/images/XPButtonNoText_160x22.png";c.button_width=160;c.button_text_style=".upload_button { font-family: Helvetica, Arial, sans-serif; font-size: 14pt; text-align: center; }";c.button_text_top_padding=1;c.button_text_left_padding=5}try{return new SWFUpload(c)}catch(d){alert("Error create swfupload "+d.message)}};