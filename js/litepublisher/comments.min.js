(function(d,e,f){f.litepubl.Commentquote=Class.extend({init:function(b){this.options=d.extend({comments:"#commentlist",form:"#commentform"},ltoptions.theme.comments,b);var c=this;b=d(this.options.comments);d("*[onclick^='replycomment'], *[onclick^='quotecomment']",b).each(function(){var a=d(this),b=/^\s*(\w*)\s*\(\s*(\d*)\s*,\s*'(.*)'\s*\)/.exec(a.attr("onclick"));a.attr("onclick",!1);a.data("idcomment",b[2]);a.data("authorname",b[3]);a.addClass("replycomment"==b[1]?"replycomment":"quotecomment")});
b.off("click.quotecomment").on("click.quotecomment",".replycomment, .quotecomment",function(){var a=d(this);a.hasClass("replycomment")?c.reply(a.data("idcomment"),a.data("authorname")):a.hasClass("quotecomment")&&c.quote(a.data("idcomment"),a.data("authorname"));return!1})},getarea:function(){return d("textarea[name='content']",this.options.form)},getquoted:function(b,c){return""==c?lang.comment.to+" [b]"+b+"[/b]: ":"[b]"+b+"[/b] "+lang.comment.says+":\n[quote]"+c+"[/quote]\n"},quote:function(b,c){var a=
f.getSelection?f.getSelection():e.getSelection?e.getSelection():e.selection?e.selection.createRange().text:"";""==a&&(a=d("#commentcontent-"+b).text());var g=this.getarea();g.val(g.val()+this.getquoted(c,a)).focus()},reply:function(b,c){var a=this.getarea();a.val(a.val()+this.getquoted(c,""))}});d(e).ready(function(){litepubl.commentquote=new litepubl.Commentquote})})(jQuery,document,window);
