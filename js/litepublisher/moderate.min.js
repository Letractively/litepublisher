function movecomment(e,b){var c=document.getElementById("comment-"+e);var a=ltoptions.commentsid;if(b=="hold"){a="hold"+ltoptions.commentsid}var d=document.getElementById(a);d.appendChild(c.cloneNode(true));c.parentNode.removeChild(c)}function deletecomment(a){if(!confirm(lang.comments.confirmdelete)){return}if(client==undefined){client=createclient()}client.litepublisher.deletecomment({params:["","",a,ltoptions.idpost],onSuccess:function(b){var c=document.getElementById("comment-"+a);c.parentNode.removeChild(c)},onException:function(b){alert(lang.comments.notdeleted)},onComplete:function(b){}})}function setcommentstatus(b,a){if(client==undefined){client=createclient()}client.litepublisher.comments.setstatus({params:["","",b,ltoptions.idpost,a],onSuccess:function(c){movecomment(b,a)},onException:function(c){alert(lang.comments.notmoderated)},onComplete:function(c){}})}function moderate(b,a){if(a=="delete"){if(!confirm(lang.comments.confirmdelete)){return}}if(client==undefined){client=createclient()}client.litepublisher.moderate({params:["","",ltoptions.idpost,b,a],onSuccess:function(c){for(var d=0,f=b.length;d<f;d++){if(a=="delete"){var e=document.getElementById("comment-"+b[d]);e.parentNode.removeChild(e)}else{movecomment(b[d],a)}}},onException:function(c){alert(lang.comments.notmoderated)},onComplete:function(c){}})}function submitmoderateform(c,e){var d=new Array();for(var a=0,f=c.elements.length;a<f;a++){var b=c.elements[a];if((b.type=="checkbox")&&(b.checked==true)){d.push(parseInt(b.value))}}moderate(d,e)}function editcomment(a){if(client==undefined){client=createclient()}client.litepublisher.comments.get({params:["","",a,ltoptions.idpost],onSuccess:function(b){try{document.getElementById("name").value=b.name;document.getElementById("email").value=b.email;document.getElementById("url").value=b.url;document.getElementById("comment").value=b.rawcontent;document.getElementById("commentform").onsubmit=submiteditcomment(a);document.getElementById("name").focus()}catch(c){alert(c.message)}},onException:function(b){alert(lang.comments.errorrecieved)},onComplete:function(b){}})}function submiteditcomment(a){return function(){client.litepublisher.comments.edit({params:["","",a,ltoptions.idpost,{name:htmlentities(document.getElementById("name").value),email:htmlentities(document.getElementById("email").value),url:htmlentities(document.getElementById("url").value),content:htmlentities9(document.getElementById("comment").value)}],onSuccess:function(b){document.getElementById("name").value="";document.getElementById("email").value="";document.getElementById("url").value="";var c=document.getElementById("comment").value;document.getElementById("comment").value="";document.getElementById("commentform").onsubmit=null;var d=document.getElementById("commentcontent-"+a);d.innerHTML=c;document.getElementById("checkbox-comment-"+a).focus()},onException:function(b){alert(lang.comments.notedited)},onComplete:function(b){}});return false}}function sendreply(){try{var a=document.getElementById("comment").value;if(a==""){alert(lang.comment.emptycontent);return}if(client==undefined){client=createclient()}client.litepublisher.comments.reply({params:["","",0,ltoptions.idpost,htmlentities(a)],onSuccess:function(c){try{document.getElementById("comment").value="";window.location.reload(true)}catch(d){alert(d.message)}},onException:function(c){alert(lang.comments.notedited)},onComplete:function(c){}})}catch(b){alert(b.message)}};