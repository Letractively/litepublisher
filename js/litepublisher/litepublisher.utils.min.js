(function(c,g,e){var f=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,h=f.exec(ltoptions.url),f=f.exec(location.href.toLowerCase())||[];h[2]!=f[2]&&(ltoptions.url=ltoptions.url.replace(h[2],f[2]),ltoptions.files=ltoptions.files.replace(h[2],f[2]));ltoptions.ajaxurl=ltoptions.url.substring(ltoptions.url.indexOf(":")+1);e.litepubl={tml:{},guid:c.now(),ready2:c.Deferred(),adminpanel:!1,is_adminpanel:function(){return!1!==litepubl.adminpanel?litepubl.adminpanel:litepubl.adminpanel=litepubl.is_admin_url(location.href)},
is_admin_url:function(a){a=a.toLowerCase();var d=a.indexOf("://");0<=d&&(a=a.substring(d+4));a=a.split("/");return 2>=a.length||"admin"!=a[1]||""==a[2]?0:/^(login|logout|password|reguser)$/.test(a[2])?0:1},user:0,getuser:function(){var a=litepubl;return a.user?a.user:a.user={id:parseInt(c.cookie("litepubl_user_id")),pass:c.cookie("litepubl_user"),regservice:c.cookie("litepubl_regservice")}},stat:function(a,d){},getjson:function(a,d){return c.ajax({type:"get",url:ltoptions.ajaxurl+"/admin/jsonserver.php",
data:a,success:d,dataType:"json",cache:"cache"in a?a.cache:!0})},_onnew:{},_oninit:{},newinstance:function(a,d){var b=litepubl;if(a in b._onnew){var c={varname:a,fn:d};b._onnew[a].fire(c);delete b._onnew[a];d=c.fn}c=new d;b[a]=c;a in b._oninit&&(b._oninit[a].fire(c),delete b._oninit[a]);return c},oninit:function(a,d){var b=litepubl;if(a in b)return d(b[a]);a in b._oninit||(b._oninit[a]=c.Callbacks());b._oninit[a].add(d)},onnew:function(a,d){var b=llitepubl;if(a in b)return!1;a in b._onnew||(b._onnew[a]=
c.Callbacks());b._onnew[a].add(d)}};e.dump=function(a){alert(JSON.stringify(a))};e.get_get=function(a,c){for(var b=(c?c.substring(c.indexOf("?")+1):e.location.search.substring(1)).split("&"),k=0,f=b.length;k<f;k++){var l=b[k].split("=");if(a==l[0])return decodeURIComponent(l[1])}return!1};e.get_cookie=function(a){return c.cookie(a)};e.set_cookie=function(a,d,b){c.cookie(a,d,{path:"/",expires:b?b:3650,secure:"secure"in ltoptions?ltoptions.secure:!1})};e.$ready=function(a){c(g).ready(a)};e.ready2=function(a){litepubl.ready2.done(a)};
c(g).ready(function(){e.setTimeout(function(){litepubl.ready2.resolve()},20)});e.erralert=function(a){alert("error "+a.message)};c.extend({load_script:function(a,d){return c.ajax({type:"get",url:a,data:void 0,success:d,dataType:"script",cache:!0})},load_css:function(a){c('<link rel="stylesheet" type="text/css" href="'+a+'" />').appendTo("head:first")},jsonrpc:function(a){a=c.extend({type:"post",method:"",params:{},callback:!1,error:!1,cache:!1},a);var d=a.params,b=litepubl.getuser();b.id&&(d.litepubl_user_id=
b.id,d.litepubl_user=b.pass,d.litepubl_user_regservice=b.regservice);b={type:a.type,url:ltoptions.ajaxurl+"/admin/jsonserver.php",cache:a.cache,dataType:"json",success:function(b){"object"===typeof b&&("result"in b?c.isFunction(a.callback)&&a.callback(b.result):"error"in b&&c.isFunction(a.error)&&a.error(b.error.message,b.error.code))}};"post"==a.type?(a.cache||(b.url=b.url+"?_="+litepubl.guid++),b.data=c.toJSON({jsonrpc:"2.0",method:a.method,params:d,id:litepubl.guid++})):(b.type="get",d.method=
a.method,b.data=d);return c.ajax(b).fail(function(b,d,e){c.isFunction(a.error)&&a.error(b.responseText,b.status)})},onEscape:function(a){c(g).off("keydown.onEscape").on("keydown.onEscape",function(d){27==d.keyCode&&(c.isFunction(a)&&a(),d.preventDefault(),c(g).off("keydown.onEscape"))})}});c.links={isready:!1,links:!1,list:!1,on:function(a,d){var b=c.links;if(b.isready)b.links.filter(a).on("click",d);else b.list||(b.list=[]),b.list.push({filter:a,fn:d}),c(g).ready(function(){var a=c("a");b.links=
a;b.isready=!0;for(var d=b.list,e=0,f=d.length;e<f;e++){var g=d[e];a.filter(g.filter).on("click",g.fn)}b.list=!1})}};c.fn.replaceComment=function(a){a=void 0==a?c(this.get(0).nodeValue):c(a);c(this).before(a).remove();return a};c.fn.findcomment=function(a){return c.findcomment(this.get(0),a?"widgetcontent-"+a:!1)};c.findcomment=function(a,d){var b=!1;do if(b=c.nextcomment(a,d))return b;while(a=a.parentNode);return!1};c.nextcomment=function(a,d){var b=!1;do{if(8==a.nodeType&&(!d||d==a.nodeValue))return a;
if(a.firstChild&&(b=c.nextcomment(a.firstChild,d)))return b}while(a=a.nextSibling);return!1}})(jQuery,document,window);
