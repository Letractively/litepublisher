(function(b,f,g){var h=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,l=h.exec(ltoptions.url),h=h.exec(location.href.toLowerCase())||[];l[2]!=h[2]&&(ltoptions.url=ltoptions.url.replace(l[2],h[2]),ltoptions.files=ltoptions.files.replace(l[2],h[2]));ltoptions.ajaxurl=ltoptions.url.substring(ltoptions.url.indexOf(":")+1);g.litepubl={guid:b.now(),tml:{},adminpanel:!1,is_adminpanel:function(){return!1!==litepubl.adminpanel?litepubl.adminpanel:litepubl.adminpanel=litepubl.is_admin_url(location.href)},is_admin_url:function(a){a=
a.toLowerCase();var c=a.indexOf("://");0<=c&&(a=a.substring(c+4));a=a.split("/");return 2>=a.length||"admin"!=a[1]||""==a[2]?0:/^(login|logout|password|reguser)$/.test(a[2])?0:1},user:0,getuser:function(){var a=litepubl;return a.user?a.user:a.user={id:parseInt(b.cookie("litepubl_user_id")),pass:b.cookie("litepubl_user"),regservice:b.cookie("litepubl_regservice")}},stat:function(a,c){},getjson:function(a,c){return b.ajax({type:"get",url:ltoptions.ajaxurl+"/admin/jsonserver.php",data:a,success:c,dataType:"json",
cache:"cache"in a?a.cache:!0})},_onnew:{},_oninit:{},newinstance:function(a,c){var b=litepubl;if(a in b._onnew){var e={varname:a,fn:c};b._onnew[a].fire(e);delete b._onnew[a];c=e.fn}e=new c;b[a]=e;a in b._oninit&&(b._oninit[a].fire(e),delete b._oninit[a]);return e},oninit:function(a,c){var d=litepubl;if(a in d)return c(d[a]);a in d._oninit||(d._oninit[a]=b.Callbacks());d._oninit[a].add(c)},onnew:function(a,c){var d=llitepubl;if(a in d)return!1;a in d._onnew||(d._onnew[a]=b.Callbacks());d._onnew[a].add(c)}};
g.dump=function(a){alert(JSON.stringify(a))};g.get_get=function(a,b){for(var d=(b?b.substring(b.indexOf("?")+1):g.location.search.substring(1)).split("&"),e=0,m=d.length;e<m;e++){var f=d[e].split("=");if(a==f[0])return decodeURIComponent(f[1])}return!1};g.get_cookie=function(a){return b.cookie(a)};g.set_cookie=function(a,c,d){b.cookie(a,c,{path:"/",expires:d?d:3650,secure:"secure"in ltoptions?ltoptions.secure:!1})};g.$ready=function(a){b(f).ready(a)};g.erralert=function(a){alert("error "+a.message)};
var k=!1;b.extend({ready2:function(a){if(!k){k=b.Deferred();var c=function(){setTimeout(function(){k.resolve()},0)};if(b.isReady)b(f).ready(c);else b(f).on("ready",c)}k.done(a)},load_script:function(a,c){return b.ajax({type:"get",url:a,data:void 0,success:c,dataType:"script",cache:!0})},hasprop:function(a,b){return"object"===typeof a&&b in a},jsonrpc:function(a){a=b.extend({type:"post",method:"",params:{},slave:!1,callback:!1,error:!1,cache:!1},a);var c=a.params,d=litepubl.getuser();d.id&&(c.litepubl_user_id=
d.id,c.litepubl_user=d.pass,c.litepubl_user_regservice=d.regservice);a.slave&&(c.slave={method:a.slave.method,params:a.slave.params});d={type:a.type,url:ltoptions.ajaxurl+"/admin/jsonserver.php",cache:a.cache,dataType:"json",success:function(c){if("object"===typeof c)if("result"in c){if(b.isFunction(a.callback)&&a.callback(c.result),a.slave&&b.hasprop(c.result,"slave")){var d=a.slave;c=c.result.slave;b.hasprop(c,"error")?b.hasprop(d,"error")&&b.isFunction(d.error)&&d.error(c.error.message,c.error.code):
b.hasprop(d,"callback")&&b.isFunction(d.callback)&&d.callback(c)}}else"error"in c&&b.isFunction(a.error)&&a.error(c.error.message,c.error.code)}};"post"==a.type?(a.cache||(d.url=d.url+"?_="+litepubl.guid++),d.data=b.toJSON({jsonrpc:"2.0",method:a.method,params:c,id:litepubl.guid++})):(d.type="get",c.method=a.method,d.data=c);return b.ajax(d).fail(function(c,d,f){b.isFunction(a.error)&&a.error(c.responseText,c.status)})},onEscape:function(a){b(f).off("keydown.onEscape").on("keydown.onEscape",function(c){27==
c.keyCode&&(b.isFunction(a)&&a(),c.preventDefault(),b(f).off("keydown.onEscape"))})}});b.fn.replaceComment=function(a){a=void 0==a?b(this.get(0).nodeValue):b(a);b(this).before(a).remove();return a};b.fn.findcomment=function(a){return b.findcomment(this.get(0),a?"widgetcontent-"+a:!1)};b.findcomment=function(a,c){var d=!1;do if(d=b.nextcomment(a,c))return d;while(a=a.parentNode);return!1};b.nextcomment=function(a,c){var d=!1;do{if(8==a.nodeType&&(!c||c==a.nodeValue))return a;if(a.firstChild&&(d=b.nextcomment(a.firstChild,
c)))return d}while(a=a.nextSibling);return!1};b.css_loader={links:[],counter:0,timer:!1,add:function(a){a=b('<link rel="stylesheet" type="text/css" media="only x" href="'+a+'" />').appendTo("head:first").get(0);this.ready(a)||(this.links.push(a),this.counter=60,this.timer||(this.timer=setInterval(b.proxy(this.wait,this),50)))},wait:function(){for(var a=this.links,c=a.length-1;0<=c;c--)this.ready(a[c])?a.splice(c,1):this.counter||(a[c].media="all");if(!a.length||0>this.counter--)clearInterval(this.timer),
this.counter=this.timer=0,a.length=0},ready:function(a){for(var c=a.href,b=f.styleSheets,e=0,g=b.length;e<g;e++)if(b[e].href&&0<=b[e].href.indexOf(c))return a.media="all",!0;return!1}};b.load_css=b.proxy(b.css_loader.add,b.css_loader)})(jQuery,document,window);
