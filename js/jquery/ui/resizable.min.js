(function(g){"function"===typeof define&&define.amd?define(["jquery","./core","./mouse","./widget"],g):g(jQuery)})(function(g){g.widget("ui.resizable",g.ui.mouse,{version:"@VERSION",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(a){return parseInt(a,
10)||0},_isNumber:function(a){return!isNaN(parseInt(a,10))},_hasScroll:function(a,b){if("hidden"===g(a).css("overflow"))return!1;var c=b&&"left"===b?"scrollLeft":"scrollTop",f=!1;if(0<a[c])return!0;a[c]=1;f=0<a[c];a[c]=0;return f},_create:function(){var a,b,c,f,e,h=this,d=this.options;this.element.addClass("ui-resizable");g.extend(this,{_aspectRatio:!!d.aspectRatio,aspectRatio:d.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:d.helper||d.ghost||d.animate?d.helper||
"ui-resizable-helper":null});this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(g("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),
marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),
this._proportionallyResize());this.handles=d.handles||(g(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se");if(this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),a=this.handles.split(","),this.handles={},b=0;b<a.length;b++)c=g.trim(a[b]),e="ui-resizable-"+c,f=g("<div class='ui-resizable-handle "+
e+"'></div>"),f.css({zIndex:d.zIndex}),"se"===c&&f.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[c]=".ui-resizable-"+c,this.element.append(f);this._renderAxis=function(a){var b,c,d;a=a||this.element;for(b in this.handles)this.handles[b].constructor===String&&(this.handles[b]=this.element.children(this.handles[b]).first().show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(c=g(this.handles[b],this.element),d=/sw|ne|nw|se|n|s/.test(b)?
c.outerHeight():c.outerWidth(),c=["padding",/ne|nw|n/.test(b)?"Top":/se|sw|s/.test(b)?"Bottom":/^e$/.test(b)?"Right":"Left"].join(""),a.css(c,d),this._proportionallyResize()),g(this.handles[b])};this._renderAxis(this.element);this._handles=g(".ui-resizable-handle",this.element).disableSelection();this._handles.mouseover(function(){h.resizing||(this.className&&(f=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),h.axis=f&&f[1]?f[1]:"se")});d.autoHide&&(this._handles.hide(),g(this.element).addClass("ui-resizable-autohide").mouseenter(function(){d.disabled||
(g(this).removeClass("ui-resizable-autohide"),h._handles.show())}).mouseleave(function(){d.disabled||h.resizing||(g(this).addClass("ui-resizable-autohide"),h._handles.hide())}));this._mouseInit()},_destroy:function(){this._mouseDestroy();var a,b=function(a){g(a).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};this.elementIsWrapper&&(b(this.element),a=this.element,
this.originalElement.css({position:a.css("position"),width:a.outerWidth(),height:a.outerHeight(),top:a.css("top"),left:a.css("left")}).insertAfter(a),a.remove());this.originalElement.css("resize",this.originalResizeStyle);b(this.originalElement);return this},_mouseCapture:function(a){var b,c,f=!1;for(b in this.handles)if(c=g(this.handles[b])[0],c===a.target||g.contains(c,a.target))f=!0;return!this.options.disabled&&f},_mouseStart:function(a){var b,c,f=this.options,e=this.element;this.resizing=!0;
this._renderProxy();b=this._num(this.helper.css("left"));c=this._num(this.helper.css("top"));f.containment&&(b+=g(f.containment).scrollLeft()||0,c+=g(f.containment).scrollTop()||0);this.offset=this.helper.offset();this.position={left:b,top:c};this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:e.width(),height:e.height()};this.originalSize=this._helper?{width:e.outerWidth(),height:e.outerHeight()}:{width:e.width(),height:e.height()};this.originalPosition={left:b,
top:c};this.sizeDiff={width:e.outerWidth()-e.width(),height:e.outerHeight()-e.height()};this.originalMousePosition={left:a.pageX,top:a.pageY};this.aspectRatio="number"===typeof f.aspectRatio?f.aspectRatio:this.originalSize.width/this.originalSize.height||1;b=g(".ui-resizable-"+this.axis).css("cursor");g("body").css("cursor","auto"===b?this.axis+"-resize":b);e.addClass("ui-resizable-resizing");this._propagate("start",a);return!0},_mouseDrag:function(a){var b,c=this.helper,f={},e=this.originalMousePosition;
b=a.pageX-e.left||0;var e=a.pageY-e.top||0,h=this._change[this.axis];this.prevPosition={top:this.position.top,left:this.position.left};this.prevSize={width:this.size.width,height:this.size.height};if(!h)return!1;b=h.apply(this,[a,b,e]);this._updateVirtualBoundaries(a.shiftKey);if(this._aspectRatio||a.shiftKey)b=this._updateRatio(b,a);b=this._respectSize(b,a);this._updateCache(b);this._propagate("resize",a);this.position.top!==this.prevPosition.top&&(f.top=this.position.top+"px");this.position.left!==
this.prevPosition.left&&(f.left=this.position.left+"px");this.size.width!==this.prevSize.width&&(f.width=this.size.width+"px");this.size.height!==this.prevSize.height&&(f.height=this.size.height+"px");c.css(f);!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize();g.isEmptyObject(f)||this._trigger("resize",a,this.ui());return!1},_mouseStop:function(a){this.resizing=!1;var b,c,f,e=this.options;this._helper&&(b=this._proportionallyResizeElements,b=(c=b.length&&/textarea/i.test(b[0].nodeName))&&
this._hasScroll(b[0],"left")?0:this.sizeDiff.height,c=c?0:this.sizeDiff.width,c={width:this.helper.width()-c,height:this.helper.height()-b},b=parseInt(this.element.css("left"),10)+(this.position.left-this.originalPosition.left)||null,f=parseInt(this.element.css("top"),10)+(this.position.top-this.originalPosition.top)||null,e.animate||this.element.css(g.extend(c,{top:f,left:b})),this.helper.height(this.size.height),this.helper.width(this.size.width),this._helper&&!e.animate&&this._proportionallyResize());
g("body").css("cursor","auto");this.element.removeClass("ui-resizable-resizing");this._propagate("stop",a);this._helper&&this.helper.remove();return!1},_updateVirtualBoundaries:function(a){var b,c,f,e;e=this.options;e={minWidth:this._isNumber(e.minWidth)?e.minWidth:0,maxWidth:this._isNumber(e.maxWidth)?e.maxWidth:Infinity,minHeight:this._isNumber(e.minHeight)?e.minHeight:0,maxHeight:this._isNumber(e.maxHeight)?e.maxHeight:Infinity};if(this._aspectRatio||a)a=e.minHeight*this.aspectRatio,c=e.minWidth/
this.aspectRatio,b=e.maxHeight*this.aspectRatio,f=e.maxWidth/this.aspectRatio,a>e.minWidth&&(e.minWidth=a),c>e.minHeight&&(e.minHeight=c),b<e.maxWidth&&(e.maxWidth=b),f<e.maxHeight&&(e.maxHeight=f);this._vBoundaries=e},_updateCache:function(a){this.offset=this.helper.offset();this._isNumber(a.left)&&(this.position.left=a.left);this._isNumber(a.top)&&(this.position.top=a.top);this._isNumber(a.height)&&(this.size.height=a.height);this._isNumber(a.width)&&(this.size.width=a.width)},_updateRatio:function(a){var b=
this.position,c=this.size,f=this.axis;this._isNumber(a.height)?a.width=a.height*this.aspectRatio:this._isNumber(a.width)&&(a.height=a.width/this.aspectRatio);"sw"===f&&(a.left=b.left+(c.width-a.width),a.top=null);"nw"===f&&(a.top=b.top+(c.height-a.height),a.left=b.left+(c.width-a.width));return a},_respectSize:function(a){var b=this._vBoundaries,c=this.axis,f=this._isNumber(a.width)&&b.maxWidth&&b.maxWidth<a.width,e=this._isNumber(a.height)&&b.maxHeight&&b.maxHeight<a.height,g=this._isNumber(a.width)&&
b.minWidth&&b.minWidth>a.width,d=this._isNumber(a.height)&&b.minHeight&&b.minHeight>a.height,k=this.originalPosition.left+this.originalSize.width,l=this.position.top+this.size.height,m=/sw|nw|w/.test(c),c=/nw|ne|n/.test(c);g&&(a.width=b.minWidth);d&&(a.height=b.minHeight);f&&(a.width=b.maxWidth);e&&(a.height=b.maxHeight);g&&m&&(a.left=k-b.minWidth);f&&m&&(a.left=k-b.maxWidth);d&&c&&(a.top=l-b.minHeight);e&&c&&(a.top=l-b.maxHeight);a.width||a.height||a.left||!a.top?a.width||a.height||a.top||!a.left||
(a.left=null):a.top=null;return a},_proportionallyResize:function(){if(this._proportionallyResizeElements.length){var a,b,c,f,e,g=this.helper||this.element;for(a=0;a<this._proportionallyResizeElements.length;a++){e=this._proportionallyResizeElements[a];if(!this.borderDif)for(this.borderDif=[],c=[e.css("borderTopWidth"),e.css("borderRightWidth"),e.css("borderBottomWidth"),e.css("borderLeftWidth")],f=[e.css("paddingTop"),e.css("paddingRight"),e.css("paddingBottom"),e.css("paddingLeft")],b=0;b<c.length;b++)this.borderDif[b]=
(parseInt(c[b],10)||0)+(parseInt(f[b],10)||0);e.css({height:g.height()-this.borderDif[0]-this.borderDif[2]||0,width:g.width()-this.borderDif[1]-this.borderDif[3]||0})}}},_renderProxy:function(){var a=this.options;this.elementOffset=this.element.offset();this._helper?(this.helper=this.helper||g("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+
"px",zIndex:++a.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(a,b){return{width:this.originalSize.width+b}},w:function(a,b){return{left:this.originalPosition.left+b,width:this.originalSize.width-b}},n:function(a,b,c){return{top:this.originalPosition.top+c,height:this.originalSize.height-c}},s:function(a,b,c){return{height:this.originalSize.height+c}},se:function(a,b,c){return g.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,
[a,b,c]))},sw:function(a,b,c){return g.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[a,b,c]))},ne:function(a,b,c){return g.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[a,b,c]))},nw:function(a,b,c){return g.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[a,b,c]))}},_propagate:function(a,b){g.ui.plugin.call(this,a,[b,this.ui()]);"resize"!==a&&this._trigger(a,b,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,
element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition,prevSize:this.prevSize,prevPosition:this.prevPosition}}});g.ui.plugin.add("resizable","animate",{stop:function(a){var b=g(this).resizable("instance"),c=b.options,f=b._proportionallyResizeElements,e=f.length&&/textarea/i.test(f[0].nodeName),h=e&&b._hasScroll(f[0],"left")?0:b.sizeDiff.height,e={width:b.size.width-(e?0:b.sizeDiff.width),height:b.size.height-
h},h=parseInt(b.element.css("left"),10)+(b.position.left-b.originalPosition.left)||null,d=parseInt(b.element.css("top"),10)+(b.position.top-b.originalPosition.top)||null;b.element.animate(g.extend(e,d&&h?{top:d,left:h}:{}),{duration:c.animateDuration,easing:c.animateEasing,step:function(){var c={width:parseInt(b.element.css("width"),10),height:parseInt(b.element.css("height"),10),top:parseInt(b.element.css("top"),10),left:parseInt(b.element.css("left"),10)};f&&f.length&&g(f[0]).css({width:c.width,
height:c.height});b._updateCache(c);b._propagate("resize",a)}})}});g.ui.plugin.add("resizable","containment",{start:function(){var a,b,c,f,e,h=g(this).resizable("instance"),d=h.element;c=h.options.containment;if(d=c instanceof g?c.get(0):/parent/.test(c)?d.parent().get(0):c)h.containerElement=g(d),/document/.test(c)||c===document?(h.containerOffset={left:0,top:0},h.containerPosition={left:0,top:0},h.parentData={element:g(document),left:0,top:0,width:g(document).width(),height:g(document).height()||
document.body.parentNode.scrollHeight}):(a=g(d),b=[],g(["Top","Right","Left","Bottom"]).each(function(c,d){b[c]=h._num(a.css("padding"+d))}),h.containerOffset=a.offset(),h.containerPosition=a.position(),h.containerSize={height:a.innerHeight()-b[3],width:a.innerWidth()-b[1]},c=h.containerOffset,f=h.containerSize.height,e=h.containerSize.width,e=h._hasScroll(d,"left")?d.scrollWidth:e,f=h._hasScroll(d)?d.scrollHeight:f,h.parentData={element:d,left:c.left,top:c.top,width:e,height:f})},resize:function(a,
b){var c,f,e,h,d=g(this).resizable("instance");c=d.options;f=d.containerOffset;h=d.position;var k=d._aspectRatio||a.shiftKey;e={top:0,left:0};var l=d.containerElement,m=!0;l[0]!==document&&/static/.test(l.css("position"))&&(e=f);h.left<(d._helper?f.left:0)&&(d.size.width+=d._helper?d.position.left-f.left:d.position.left-e.left,k&&(d.size.height=d.size.width/d.aspectRatio,m=!1),d.position.left=c.helper?f.left:0);h.top<(d._helper?f.top:0)&&(d.size.height+=d._helper?d.position.top-f.top:d.position.top,
k&&(d.size.width=d.size.height*d.aspectRatio,m=!1),d.position.top=d._helper?f.top:0);d.offset.left=d.parentData.left+d.position.left;d.offset.top=d.parentData.top+d.position.top;c=Math.abs((d._helper?d.offset.left-e.left:d.offset.left-f.left)+d.sizeDiff.width);f=Math.abs((d._helper?d.offset.top-e.top:d.offset.top-f.top)+d.sizeDiff.height);e=d.containerElement.get(0)===d.element.parent().get(0);h=/relative|absolute/.test(d.containerElement.css("position"));e&&h&&(c-=Math.abs(d.parentData.left));c+
d.size.width>=d.parentData.width&&(d.size.width=d.parentData.width-c,k&&(d.size.height=d.size.width/d.aspectRatio,m=!1));f+d.size.height>=d.parentData.height&&(d.size.height=d.parentData.height-f,k&&(d.size.width=d.size.height*d.aspectRatio,m=!1));m||(d.position.left=b.prevPosition.left,d.position.top=b.prevPosition.top,d.size.width=b.prevSize.width,d.size.height=b.prevSize.height)},stop:function(){var a=g(this).resizable("instance"),b=a.options,c=a.containerOffset,f=a.containerPosition,e=a.containerElement,
h=g(a.helper),d=h.offset(),k=h.outerWidth()-a.sizeDiff.width,h=h.outerHeight()-a.sizeDiff.height;a._helper&&!b.animate&&/relative/.test(e.css("position"))&&g(this).css({left:d.left-f.left-c.left,width:k,height:h});a._helper&&!b.animate&&/static/.test(e.css("position"))&&g(this).css({left:d.left-f.left-c.left,width:k,height:h})}});g.ui.plugin.add("resizable","alsoResize",{start:function(){var a=g(this).resizable("instance").options,b=function(a){g(a).each(function(){var a=g(this);a.data("ui-resizable-alsoresize",
{width:parseInt(a.width(),10),height:parseInt(a.height(),10),left:parseInt(a.css("left"),10),top:parseInt(a.css("top"),10)})})};"object"!==typeof a.alsoResize||a.alsoResize.parentNode?b(a.alsoResize):a.alsoResize.length?(a.alsoResize=a.alsoResize[0],b(a.alsoResize)):g.each(a.alsoResize,function(a){b(a)})},resize:function(a,b){var c=g(this).resizable("instance"),f=c.options,e=c.originalSize,h=c.originalPosition,d={height:c.size.height-e.height||0,width:c.size.width-e.width||0,top:c.position.top-h.top||
0,left:c.position.left-h.left||0},k=function(a,c){g(a).each(function(){var a=g(this),e=g(this).data("ui-resizable-alsoresize"),f={},h=c&&c.length?c:a.parents(b.originalElement[0]).length?["width","height"]:["width","height","top","left"];g.each(h,function(a,b){var c=(e[b]||0)+(d[b]||0);c&&0<=c&&(f[b]=c||null)});a.css(f)})};"object"!==typeof f.alsoResize||f.alsoResize.nodeType?k(f.alsoResize):g.each(f.alsoResize,function(a,b){k(a,b)})},stop:function(){g(this).removeData("resizable-alsoresize")}});
g.ui.plugin.add("resizable","ghost",{start:function(){var a=g(this).resizable("instance"),b=a.options,c=a.size;a.ghost=a.originalElement.clone();a.ghost.css({opacity:0.25,display:"block",position:"relative",height:c.height,width:c.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"===typeof b.ghost?b.ghost:"");a.ghost.appendTo(a.helper)},resize:function(){var a=g(this).resizable("instance");a.ghost&&a.ghost.css({position:"relative",height:a.size.height,width:a.size.width})},
stop:function(){var a=g(this).resizable("instance");a.ghost&&a.helper&&a.helper.get(0).removeChild(a.ghost.get(0))}});g.ui.plugin.add("resizable","grid",{resize:function(){var a=g(this).resizable("instance"),b=a.options,c=a.size,f=a.originalSize,e=a.originalPosition,h=a.axis,d="number"===typeof b.grid?[b.grid,b.grid]:b.grid,k=d[0]||1,l=d[1]||1,m=Math.round((c.width-f.width)/k)*k,c=Math.round((c.height-f.height)/l)*l,n=f.width+m,p=f.height+c,q=b.maxWidth&&b.maxWidth<n,r=b.maxHeight&&b.maxHeight<p,
s=b.minWidth&&b.minWidth>n,t=b.minHeight&&b.minHeight>p;b.grid=d;s&&(n+=k);t&&(p+=l);q&&(n-=k);r&&(p-=l);/^(se|s|e)$/.test(h)?(a.size.width=n,a.size.height=p):/^(ne)$/.test(h)?(a.size.width=n,a.size.height=p,a.position.top=e.top-c):/^(sw)$/.test(h)?(a.size.width=n,a.size.height=p,a.position.left=e.left-m):(0<p-l?(a.size.height=p,a.position.top=e.top-c):(a.size.height=l,a.position.top=e.top+f.height-l),0<n-k?(a.size.width=n,a.position.left=e.left-m):(a.size.width=k,a.position.left=e.left+f.width-k))}});
return g.ui.resizable});
