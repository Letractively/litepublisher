(function(g,l){function m(a,b){if(f.enabled){var c=i(i({},f.opts),b);a.addEventListener("paste",function(a){for(var b=[],n=(a.clipboardData||{}).items||[],h=0;h<n.length;h++){var d=n[h].getAsFile();if(d){var f=/\/(.*)/.exec(d.type);!d.name&&f&&(d.name="clipboard"+h+"."+f[1]);b.push(d)}}b.length&&(k(a,b,c),a.preventDefault(),a.stopPropagation())},!1)}}function o(a,b){if(f.enabled){var c=i(i({},f.opts),b);a.addEventListener("change",function(b){k(b,a.files,c)},!1);a.addEventListener("drop",function(a){a.stopPropagation();
a.preventDefault();k(a,a.dataTransfer.files,c)},!1)}}function p(a,b){function c(a){return function(){d||a.apply(this,arguments)}}if(f.enabled){var e=i(i({},f.opts),b),j=e.dragClass,d=!1;a.addEventListener("dragenter",c(function(c){c.stopPropagation();c.preventDefault();j&&q(a,j)}),!1);a.addEventListener("dragleave",c(function(){j&&r(a,j)}),!1);a.addEventListener("dragover",c(function(c){c.stopPropagation();c.preventDefault();j&&q(a,j)}),!1);a.addEventListener("drop",c(function(c){c.stopPropagation();
c.preventDefault();j&&r(a,j);k(c,c.dataTransfer.files,e)}),!1);l.body.addEventListener("dragstart",function(){d=!0},!0);l.body.addEventListener("dragend",function(){d=!1},!0);l.body.addEventListener("drop",function(a){a.dataTransfer.files&&a.dataTransfer.files.length&&(a.stopPropagation(),a.preventDefault())},!1)}}function u(a,b){for(var c=0;c<a.length;c++){var e=a[c],d=e,f=e.name.substring(0,e.name.lastIndexOf(".")),h=e.name.substring(e.name.lastIndexOf(".")+1),g=c,i=v(),w=b,e=e.size,s=Math.floor(Math.log(e)/
Math.log(1024)),e=(e/Math.pow(1024,Math.floor(s))).toFixed(2)+" "+"bytes,kb,MB,GB,TB,PB".split(",")[s];d.extra={nameNoExtension:f,extension:h,fileID:g,uniqueID:i,groupID:w,prettySize:e}}}function x(a,b,c){for(var e in b)if(a.match(RegExp(e)))return"readAs"+b[e];return"readAs"+c}function k(a,b,c){function e(){h.ended=new Date;c.on.groupend(h)}function d(){0===--g&&e()}var g=b.length,h={groupID:y(),files:b,started:new Date};f.output.push(h);u(b,h.groupID);c.on.groupstart(h);if(b.length){var i=f.sync&&
z,k;i&&(k=A.getWorker(B,function(a){var b=a.data.file,e=a.data.result;b.extra||(b.extra=a.data.extra);b.extra.ended=new Date;c.on["error"===e?"error":"load"]({target:{result:e}},b);d()}));Array.prototype.forEach.call(b,function(b){b.extra.started=new Date;if(c.accept&&!b.type.match(RegExp(c.accept)))c.on.skip(b),d();else if(!1===c.on.beforestart(b))c.on.skip(b),d();else{var e=x(b.type,c.readAsMap,c.readAsDefault);if(i&&k)k.postMessage({file:b,extra:b.extra,readAs:e});else{var f=new t;f.originalEvent=
a;C.forEach(function(a){f["on"+a]=function(e){if("load"==a||"error"==a)b.extra.ended=new Date;c.on[a](e,b);"loadend"==a&&d()}});f[e](b)}}})}else e()}function d(){}function i(a,b){for(var c in b)b[c]&&b[c].constructor&&b[c].constructor===Object?(a[c]=a[c]||{},arguments.callee(a[c],b[c])):a[c]=b[c];return a}function q(a,b){RegExp("(?:^|\\s+)"+b+"(?:\\s+|$)").test(a.className)||(a.className=a.className?[a.className,b].join(" "):b)}function r(a,b){RegExp("(?:^|\\s+)"+b+"(?:\\s+|$)").test(a.className)&&
(a.className=a.className.replace(RegExp("(?:^|\\s+)"+b+"(?:\\s+|$)","g")," ").replace(/^\s\s*/,"").replace(/\s\s*$/,""))}var t=g.FileReader,z=!1,B="self.addEventListener('message', function(e) { var data=e.data; try { var reader = new FileReaderSync; postMessage({ result: reader[data.readAs](data.file), extra: data.extra, file: data.file})} catch(e){ postMessage({ result:'error', extra:data.extra, file:data.file}); } }, false);",C="loadstart,progress,load,abort,error,loadend".split(","),f=g.FileReaderJS=
{enabled:!1,setupInput:o,setupDrop:p,setupClipboard:m,sync:!1,output:[],opts:{dragClass:"drag",accept:!1,readAsDefault:"BinaryString",readAsMap:{"image/*":"DataURL","text/*":"Text"},on:{loadstart:d,progress:d,load:d,abort:d,error:d,loadend:d,skip:d,groupstart:d,groupend:d,beforestart:d}}};"undefined"!==typeof jQuery&&(jQuery.fn.fileReaderJS=function(a){return this.each(function(){$(this).is("input")?o(this,a):p(this,a)})},jQuery.fn.fileClipboard=function(a){return this.each(function(){m(this,a)})});
if(t){var A=function(){function a(a){if(g.Worker&&c&&b){var d=new c;d.append(a);return b.createObjectURL(d.getBlob())}return null}var b=g.URL||g.webkitURL,c=g.BlobBuilder||g.WebKitBlobBuilder||g.MozBlobBuilder;return{getURL:a,getWorker:function(b,c){var d=a(b);if(d){d=new Worker(d);d.onmessage=c;return d}return null}}}(),y=function(a){return function(){return a++}}(0),v=function(a){return function(){return a++}}(0);f.enabled=!0}})(this,document);
