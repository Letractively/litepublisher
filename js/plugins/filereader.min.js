(function(f,t){function v(a,c){function b(a){for(var b=[],c=(a.clipboardData||{}).items||[],k=0;k<c.length;k++){var g=c[k].getAsFile();if(g){var p=/\/(.*)/.exec(g.type);!g.name&&p&&(g.name="clipboard"+k+"."+p[1]);b.push(g)}}b.length&&(s(a,b,d),a.preventDefault(),a.stopPropagation())}if(l.enabled){var d=q(q({},l.opts),c);a.addEventListener("paste",b,!1)}}function w(a,c){function b(b){s(b,a.files,h)}function d(a){a.stopPropagation();a.preventDefault();s(a,a.dataTransfer.files,h)}if(l.enabled){var h=
q(q({},l.opts),c);a.addEventListener("change",b,!1);a.addEventListener("drop",d,!1)}}function x(a,c){function b(a){u=!1}function d(a){u=!0}function h(a){a.dataTransfer.files&&a.dataTransfer.files.length&&(a.stopPropagation(),a.preventDefault())}function n(a){return function(){u||a.apply(this,arguments)}}function e(b){b.stopPropagation();b.preventDefault();m&&y(a,m);s(b,b.dataTransfer.files,r)}function k(b){b.stopPropagation();b.preventDefault();m&&z(a,m)}function g(b){m&&y(a,m)}function p(b){b.stopPropagation();
b.preventDefault();m&&z(a,m)}if(l.enabled){var r=q(q({},l.opts),c),m=r.dragClass,u=!1;a.addEventListener("dragenter",n(k),!1);a.addEventListener("dragleave",n(g),!1);a.addEventListener("dragover",n(p),!1);a.addEventListener("drop",n(e),!1);t.body.addEventListener("dragstart",d,!0);t.body.addEventListener("dragend",b,!0);t.body.addEventListener("drop",h,!1)}}function B(a,c){for(var b=0;b<a.length;b++){var d=a[b],h=d,n=d.name.substring(0,d.name.lastIndexOf(".")),e=d.name.substring(d.name.lastIndexOf(".")+
1),k=b,g=C(),p=c,d=d.size,r=Math.floor(Math.log(d)/Math.log(1024)),d=(d/Math.pow(1024,Math.floor(r))).toFixed(2)+" "+"bytes kb MB GB TB PB".split(" ")[r];h.extra={nameNoExtension:n,extension:e,fileID:k,uniqueID:g,groupID:p,prettySize:d}}}function D(a,c,b){for(var d in c)if(a.match(RegExp(d)))return"readAs"+c[d];return"readAs"+b}function s(a,c,b){function d(){f.ended=new Date;b.on.groupend(f)}function h(){0===--e&&d()}var e=c.length,f={groupID:E(),files:c,started:new Date};l.output.push(f);B(c,f.groupID);
b.on.groupstart(f);if(c.length){var k=l.sync&&F,g;k&&(g=G.getWorker(H,function(a){var c=a.data.file,d=a.data.result;c.extra||(c.extra=a.data.extra);c.extra.ended=new Date;b.on["error"===d?"error":"load"]({target:{result:d}},c);h()}));Array.prototype.forEach.call(c,function(c){c.extra.started=new Date;if(b.accept&&!c.type.match(RegExp(b.accept)))b.on.skip(c),h();else if(!1===b.on.beforestart(c))b.on.skip(c),h();else{var d=D(c.type,b.readAsMap,b.readAsDefault);if(k&&g)g.postMessage({file:c,extra:c.extra,
readAs:d});else{var e=new A;e.originalEvent=a;I.forEach(function(a){e["on"+a]=function(d){if("load"==a||"error"==a)c.extra.ended=new Date;b.on[a](d,c);"loadend"==a&&h()}});e[d](c)}}})}else d()}function e(){}function q(a,c){for(var b in c)c[b]&&c[b].constructor&&c[b].constructor===Object?(a[b]=a[b]||{},arguments.callee(a[b],c[b])):a[b]=c[b];return a}function z(a,c){RegExp("(?:^|\\s+)"+c+"(?:\\s+|$)").test(a.className)||(a.className=a.className?[a.className,c].join(" "):c)}function y(a,c){RegExp("(?:^|\\s+)"+
c+"(?:\\s+|$)").test(a.className)&&(a.className=a.className.replace(RegExp("(?:^|\\s+)"+c+"(?:\\s+|$)","g")," ").replace(/^\s\s*/,"").replace(/\s\s*$/,""))}var A=f.FileReader,F=!1,H="self.addEventListener('message', function(e) { var data=e.data; try { var reader = new FileReaderSync; postMessage({ result: reader[data.readAs](data.file), extra: data.extra, file: data.file})} catch(e){ postMessage({ result:'error', extra:data.extra, file:data.file}); } }, false);",I="loadstart progress load abort error loadend".split(" "),
l=f.FileReaderJS={enabled:!1,setupInput:w,setupDrop:x,setupClipboard:v,sync:!1,output:[],opts:{dragClass:"drag",accept:!1,readAsDefault:"BinaryString",readAsMap:{"image/*":"DataURL","text/*":"Text"},on:{loadstart:e,progress:e,load:e,abort:e,error:e,loadend:e,skip:e,groupstart:e,groupend:e,beforestart:e}}};"undefined"!==typeof jQuery&&(jQuery.fn.fileReaderJS=function(a){return this.each(function(){$(this).is("input")?w(this,a):x(this,a)})},jQuery.fn.fileClipboard=function(a){return this.each(function(){v(this,
a)})});if(A){var G=function(){function a(a){if(f.Worker&&b&&c){var e=new b;e.append(a);return c.createObjectURL(e.getBlob())}return null}var c=f.URL||f.webkitURL,b=f.BlobBuilder||f.WebKitBlobBuilder||f.MozBlobBuilder;return{getURL:a,getWorker:function(b,c){var e=a(b);return e?(e=new Worker(e),e.onmessage=c,e):null}}}(),E=function(a){return function(){return a++}}(0),C=function(a){return function(){return a++}}(0);l.enabled=!0}})(this,document);
